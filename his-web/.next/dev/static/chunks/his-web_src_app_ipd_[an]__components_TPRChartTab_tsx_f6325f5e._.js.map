{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/auto/programming/gwt/gwt-his/his-web/src/app/ipd/%5Ban%5D/_components/TPRChartTab.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useMemo, useCallback, useRef, useEffect } from 'react';\nimport {\n  Activity, ThermometerSun, Heart, Wind, Droplets, X,\n  ArrowLeft, MousePointer2, Type, MoveRight, Pencil, Undo2, Redo2,\n  Trash2, Save, Loader2, ZoomIn, ZoomOut, Eraser, Printer, Download,\n  Check, ChevronLeft, ChevronRight, TrendingUp,\n  Pill, Beaker, Maximize2, BarChart3, Scale, Utensils,\n} from 'lucide-react';\n\n// ============================================\n// Types\n// ============================================\n\ntype AnnotationTool = 'select' | 'text' | 'arrow' | 'freehand';\ntype DayRange = 1 | 3 | 5 | 7;\ntype Shift = 'night' | 'morning' | 'afternoon';\n\ninterface VitalReading {\n  time: string;\n  temperature?: number;\n  pulse?: number;\n  respiratoryRate?: number;\n  bpSystolic?: number;\n  bpDiastolic?: number;\n  sosScore?: number;\n  o2Saturation?: number;\n  o2Therapy?: string;\n  painScore?: number;\n}\n\ninterface ShiftFluid {\n  shift: Shift;\n  oralFluid?: number;\n  parenteral?: number;\n  totalIntake?: number;\n  urine?: number;\n  drainage?: number;\n  totalOutput?: number;\n}\n\ninterface MedicationRecord {\n  time: string;\n  continuousDose?: string;\n  prnDose?: string;\n}\n\ninterface TPRDayRecord {\n  id: number;\n  date: string;\n  dateShort: string;\n  dayAdmission: number;\n  dayAfterOperation?: number;\n  vitals: VitalReading[];\n  fluids: ShiftFluid[];\n  medications: MedicationRecord[];\n  weight?: number;\n  height?: number;\n  diet?: string;\n  stool?: string;\n  patientType?: 'CI' | 'SI' | 'MI' | 'CL';\n}\n\ninterface TextAnnotation {\n  id: string;\n  type: 'text';\n  x: number;\n  y: number;\n  text: string;\n  fontSize: number;\n  color: string;\n}\n\ninterface ArrowAnnotation {\n  id: string;\n  type: 'arrow';\n  startX: number;\n  startY: number;\n  endX: number;\n  endY: number;\n  color: string;\n  strokeWidth: number;\n}\n\ninterface FreehandAnnotation {\n  id: string;\n  type: 'freehand';\n  points: { x: number; y: number }[];\n  color: string;\n  strokeWidth: number;\n}\n\ntype AllAnnotation = TextAnnotation | ArrowAnnotation | FreehandAnnotation;\n\n// ============================================\n// Constants\n// ============================================\n\nconst TIME_SLOTS = ['02:00', '06:00', '10:00', '14:00', '18:00', '22:00'];\nconst TIME_LABELS = ['2', '6', '10', '14', '18', '22'];\nconst SHIFTS: { key: Shift; labelTh: string; timeRange: string }[] = [\n  { key: 'night', labelTh: 'ดึก', timeRange: '22-06' },\n  { key: 'morning', labelTh: 'เช้า', timeRange: '06-14' },\n  { key: 'afternoon', labelTh: 'บ่าย', timeRange: '14-22' },\n];\nconst TEMP_MIN = 35;\nconst TEMP_MAX = 41;\nconst PULSE_MIN = 40;\nconst PULSE_MAX = 140;\nconst ANNOTATION_COLORS = [\n  { color: '#0d9488', name: 'Teal' },\n  { color: '#0891b2', name: 'Cyan' },\n  { color: '#3b82f6', name: 'Blue' },\n  { color: '#6366f1', name: 'Indigo' },\n  { color: '#8b5cf6', name: 'Violet' },\n  { color: '#64748b', name: 'Slate' },\n  { color: '#1e293b', name: 'Dark' },\n];\nconst MAX_HISTORY = 50;\nconst DAY_RANGE_OPTIONS: { value: DayRange; label: string }[] = [\n  { value: 1, label: '1 วัน' },\n  { value: 3, label: '3 วัน' },\n  { value: 5, label: '5 วัน' },\n  { value: 7, label: '7 วัน' },\n];\n\nconst PATIENT_TYPES = {\n  CI: { label: 'CI', fullLabel: 'ผู้ป่วยหนัก', bg: 'bg-red-600 dark:bg-red-500' },\n  SI: { label: 'SI', fullLabel: 'ผู้ป่วยกึ่งหนัก', bg: 'bg-amber-600 dark:bg-amber-500' },\n  MI: { label: 'MI', fullLabel: 'ผู้ป่วยระดับปานกลาง', bg: 'bg-sky-600 dark:bg-sky-500' },\n  CL: { label: 'CL', fullLabel: 'ผู้ป่วยระยะพักฟื้น', bg: 'bg-emerald-600 dark:bg-emerald-500' },\n};\n\nconst MEDICATION_CODES = [\n  { code: 'Mi', name: 'MO-IR or MO syrup' },\n  { code: 'Ms', name: 'MST' },\n  { code: 'M', name: 'Morphine IV' },\n  { code: 'P', name: 'Pethidine' },\n  { code: 'T', name: 'Tramadol' },\n  { code: 'F', name: 'Fentanyl' },\n  { code: 'D', name: 'Diclofenac' },\n];\n\n// ============================================\n// Mock Data Generator\n// ============================================\n\nconst generateMockTPRRecords = (): TPRDayRecord[] => {\n  const records: TPRDayRecord[] = [];\n  const baseDate = new Date(2024, 0, 21);\n  \n  for (let i = 0; i < 10; i++) {\n    const date = new Date(baseDate);\n    date.setDate(date.getDate() - i);\n    const day = date.getDate().toString().padStart(2, '0');\n    const month = (date.getMonth() + 1).toString().padStart(2, '0');\n    \n    const isFebrile = i >= 7 && i <= 8;\n    const isRecovering = i >= 3 && i <= 6;\n    const isStable = i < 3;\n    \n    const vitals: VitalReading[] = TIME_SLOTS.map((time, idx) => {\n      let baseTemp = 37.0, basePulse = 75, basePain = 2;\n      \n      if (isFebrile) {\n        baseTemp = 38.2 + Math.random() * 0.8;\n        basePulse = 95 + Math.random() * 15;\n        basePain = 5 + Math.floor(Math.random() * 3);\n      } else if (isRecovering) {\n        baseTemp = 37.2 + Math.random() * 0.5;\n        basePulse = 78 + Math.random() * 12;\n        basePain = 3 + Math.floor(Math.random() * 2);\n      } else if (isStable) {\n        baseTemp = 36.5 + Math.random() * 0.4;\n        basePulse = 70 + Math.random() * 10;\n        basePain = 1 + Math.floor(Math.random() * 2);\n      }\n      \n      if (idx >= 2 && idx <= 4) { baseTemp += 0.2; basePulse += 5; }\n      \n      return {\n        time,\n        temperature: Math.round(baseTemp * 10) / 10,\n        pulse: Math.round(basePulse),\n        respiratoryRate: 16 + Math.floor(Math.random() * 6),\n        bpSystolic: 115 + Math.floor(Math.random() * 25),\n        bpDiastolic: 70 + Math.floor(Math.random() * 15),\n        sosScore: isFebrile ? 3 : isRecovering ? 2 : 1,\n        o2Saturation: 96 + Math.floor(Math.random() * 4),\n        o2Therapy: isFebrile || isRecovering ? 'Cannula 3L' : undefined,\n        painScore: basePain,\n      };\n    });\n    \n    const fluids: ShiftFluid[] = SHIFTS.map(shift => {\n      const oral = 200 + Math.floor(Math.random() * 300);\n      const parenteral = 300 + Math.floor(Math.random() * 400);\n      const urine = 400 + Math.floor(Math.random() * 400);\n      const drainage = Math.floor(Math.random() * 100);\n      return { shift: shift.key, oralFluid: oral, parenteral, totalIntake: oral + parenteral, urine, drainage, totalOutput: urine + drainage };\n    });\n    \n    const medications: MedicationRecord[] = TIME_SLOTS.map(time => ({\n      time,\n      continuousDose: i > 5 ? 'M 2mg' : undefined,\n      prnDose: Math.random() > 0.7 ? 'T 50mg' : undefined,\n    }));\n    \n    records.push({\n      id: i + 1,\n      date: `${day}/${month}/2567`,\n      dateShort: `${day}/${month}`,\n      dayAdmission: 10 - i,\n      dayAfterOperation: i <= 6 ? 7 - i : undefined,\n      vitals, fluids, medications,\n      weight: 65, height: 170,\n      diet: i > 7 ? 'NPO' : i > 5 ? 'Clear liquid' : i > 3 ? 'Soft diet' : 'Regular',\n      stool: Math.random() > 0.5 ? '1' : '-',\n      patientType: i > 7 ? 'CI' : i > 5 ? 'SI' : i > 2 ? 'MI' : 'CL',\n    });\n  }\n  return records;\n};\n\nconst mockTPRRecords = generateMockTPRRecords();\n\n// ============================================\n// Helper Components\n// ============================================\n\nconst PatientTypeBadge = ({ type, size = 'sm' }: { type?: 'CI' | 'SI' | 'MI' | 'CL'; size?: 'sm' | 'lg' }) => {\n  if (!type) return null;\n  const config = PATIENT_TYPES[type];\n  return (\n    <span className={`${config.bg} text-white font-semibold rounded ${size === 'lg' ? 'px-2.5 py-1 text-xs' : 'px-2 py-0.5 text-[10px]'}`} title={config.fullLabel}>\n      {config.label}\n    </span>\n  );\n};\n\n// ============================================\n// TPR Graph Component (Soft Colors)\n// ============================================\n\nconst TPRGraph = ({ records, dayRange, width = 1000, height = 300 }: { records: TPRDayRecord[]; dayRange: DayRange; width?: number; height?: number }) => {\n  const [hoveredPoint, setHoveredPoint] = useState<{ x: number; y: number; data: any } | null>(null);\n  \n  const padding = { top: 25, right: 45, bottom: 20, left: 50 };\n  const graphWidth = width - padding.left - padding.right;\n  const graphHeight = height - padding.top - padding.bottom;\n  const dayWidth = graphWidth / dayRange;\n  const timeSlotWidth = dayWidth / 6;\n  \n  const tempToY = (temp: number) => padding.top + graphHeight - ((temp - TEMP_MIN) / (TEMP_MAX - TEMP_MIN) * graphHeight);\n  const pulseToY = (pulse: number) => padding.top + graphHeight - ((pulse - PULSE_MIN) / (PULSE_MAX - PULSE_MIN) * graphHeight);\n  const getX = (dayIndex: number, timeIndex: number) => padding.left + (dayIndex * dayWidth) + (timeIndex * timeSlotWidth) + (timeSlotWidth / 2);\n  \n  const displayRecords = records.slice(0, dayRange).reverse();\n  \n  const tempPoints: { x: number; y: number; value: number; record: TPRDayRecord; vital: VitalReading }[] = [];\n  const pulsePoints: { x: number; y: number; value: number; record: TPRDayRecord; vital: VitalReading }[] = [];\n  \n  displayRecords.forEach((record, dayIndex) => {\n    record.vitals.forEach((vital, timeIndex) => {\n      const x = getX(dayIndex, timeIndex);\n      if (vital.temperature) tempPoints.push({ x, y: tempToY(vital.temperature), value: vital.temperature, record, vital });\n      if (vital.pulse) pulsePoints.push({ x, y: pulseToY(vital.pulse), value: vital.pulse, record, vital });\n    });\n  });\n  \n  const tempPath = tempPoints.length > 1 ? `M ${tempPoints.map(p => `${p.x},${p.y}`).join(' L ')}` : '';\n  const pulsePath = pulsePoints.length > 1 ? `M ${pulsePoints.map(p => `${p.x},${p.y}`).join(' L ')}` : '';\n\n  return (\n    <div className=\"relative\">\n      <svg width={width} height={height} className=\"font-sans\">\n        <rect x={padding.left} y={padding.top} width={graphWidth} height={graphHeight} className=\"fill-slate-50 dark:fill-slate-800/50\" stroke=\"currentColor\" strokeOpacity={0.1} />\n        \n        {displayRecords.map((_, dayIndex) => {\n          if (dayIndex === 0) return null;\n          const x = padding.left + (dayIndex * dayWidth);\n          return <line key={`day-sep-${dayIndex}`} x1={x} y1={padding.top} x2={x} y2={padding.top + graphHeight} className=\"stroke-teal-400 dark:stroke-teal-600\" strokeWidth={1} strokeDasharray=\"4,4\" />;\n        })}\n        \n        {displayRecords.map((_, dayIndex) => (\n          TIME_SLOTS.map((_, timeIndex) => {\n            if (timeIndex === 0) return null;\n            const x = padding.left + (dayIndex * dayWidth) + (timeIndex * timeSlotWidth);\n            return <line key={`time-${dayIndex}-${timeIndex}`} x1={x} y1={padding.top} x2={x} y2={padding.top + graphHeight} className=\"stroke-slate-200 dark:stroke-slate-700\" strokeWidth={0.5} />;\n          })\n        ))}\n        \n        {[35, 36, 37, 38, 39, 40, 41].map(temp => (\n          <g key={`temp-${temp}`}>\n            <line x1={padding.left} y1={tempToY(temp)} x2={padding.left + graphWidth} y2={tempToY(temp)} className={temp === 37 ? 'stroke-emerald-400 dark:stroke-emerald-500' : 'stroke-slate-200 dark:stroke-slate-700'} strokeWidth={temp === 37 ? 1.5 : 0.5} strokeDasharray={temp === 37 ? '0' : '2,2'} />\n            <text x={padding.left - 5} y={tempToY(temp) + 4} textAnchor=\"end\" fontSize={9} className=\"fill-slate-500 dark:fill-slate-400\">{temp}</text>\n          </g>\n        ))}\n        \n        {[40, 60, 80, 100, 120, 140].map((pulse, idx) => (\n          <text key={`pulse-${pulse}`} x={padding.left - 28} y={tempToY([35, 36, 37, 38, 39, 40, 41][idx] || 35) + 4} textAnchor=\"end\" fontSize={9} className=\"fill-rose-400 dark:fill-rose-300\">{pulse}</text>\n        ))}\n        \n        <line x1={padding.left} y1={tempToY(38)} x2={padding.left + graphWidth} y2={tempToY(38)} className=\"stroke-rose-300 dark:stroke-rose-400\" strokeWidth={1} strokeDasharray=\"4,2\" />\n        \n        {tempPath && <path d={tempPath} fill=\"none\" className=\"stroke-teal-500 dark:stroke-teal-400\" strokeWidth={2} strokeLinecap=\"round\" strokeLinejoin=\"round\" />}\n        \n        {tempPoints.map((p, i) => (\n          <circle key={`temp-pt-${i}`} cx={p.x} cy={p.y} r={dayRange <= 3 ? 5 : 3} className={`cursor-pointer transition-transform hover:scale-125 ${p.value >= 38 ? 'fill-rose-500 dark:fill-rose-400' : 'fill-teal-500 dark:fill-teal-400'}`} onMouseEnter={() => setHoveredPoint({ x: p.x, y: p.y, data: { type: 'temp', ...p } })} onMouseLeave={() => setHoveredPoint(null)} />\n        ))}\n        \n        {pulsePath && <path d={pulsePath} fill=\"none\" className=\"stroke-rose-400 dark:stroke-rose-300\" strokeWidth={1.5} strokeLinecap=\"round\" strokeLinejoin=\"round\" />}\n        \n        {pulsePoints.map((p, i) => (\n          <g key={`pulse-pt-${i}`} className=\"cursor-pointer\" onMouseEnter={() => setHoveredPoint({ x: p.x, y: p.y, data: { type: 'pulse', ...p } })} onMouseLeave={() => setHoveredPoint(null)}>\n            <line x1={p.x - 3} y1={p.y - 3} x2={p.x + 3} y2={p.y + 3} className=\"stroke-rose-400 dark:stroke-rose-300\" strokeWidth={2} />\n            <line x1={p.x + 3} y1={p.y - 3} x2={p.x - 3} y2={p.y + 3} className=\"stroke-rose-400 dark:stroke-rose-300\" strokeWidth={2} />\n          </g>\n        ))}\n        \n        <g transform={`translate(${padding.left + 5}, ${padding.top + 5})`}>\n          <rect x={0} y={0} width={120} height={22} rx={4} className=\"fill-white/90 dark:fill-slate-800/90\" stroke=\"currentColor\" strokeOpacity={0.1} />\n          <circle cx={12} cy={11} r={4} className=\"fill-teal-500 dark:fill-teal-400\" />\n          <text x={20} y={14} fontSize={9} className=\"fill-teal-600 dark:fill-teal-300\">Temp (°C)</text>\n          <g transform=\"translate(75, 11)\">\n            <line x1={-3} y1={-3} x2={3} y2={3} className=\"stroke-rose-400 dark:stroke-rose-300\" strokeWidth={1.5} />\n            <line x1={3} y1={-3} x2={-3} y2={3} className=\"stroke-rose-400 dark:stroke-rose-300\" strokeWidth={1.5} />\n          </g>\n          <text x={85} y={14} fontSize={9} className=\"fill-rose-500 dark:fill-rose-300\">Pulse</text>\n        </g>\n      </svg>\n      \n      {hoveredPoint && (\n        <div className=\"absolute bg-slate-800 dark:bg-slate-700 text-white px-2.5 py-1.5 rounded-lg text-xs pointer-events-none z-50 shadow-lg\" style={{ left: hoveredPoint.x, top: hoveredPoint.y - 45, transform: 'translateX(-50%)' }}>\n          <div className=\"font-medium\">{hoveredPoint.data.record.dateShort} {hoveredPoint.data.vital.time}</div>\n          <div className={hoveredPoint.data.type === 'temp' ? 'text-teal-300' : 'text-rose-300'}>\n            {hoveredPoint.data.type === 'temp' ? `${hoveredPoint.data.value}°C` : `${hoveredPoint.data.value} bpm`}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// ============================================\n// Vitals Table Component\n// ============================================\n\nconst VitalsTable = ({ records, dayRange }: { records: TPRDayRecord[]; dayRange: DayRange }) => {\n  const displayRecords = records.slice(0, dayRange).reverse();\n  const cellWidth = dayRange <= 3 ? 'w-10' : 'w-8';\n  const fontSize = dayRange <= 3 ? 'text-xs' : 'text-[10px]';\n  \n  const rows = [\n    { key: 'rr', label: 'Respiratory rate', getValue: (v: VitalReading) => v.respiratoryRate, color: 'text-emerald-600 dark:text-emerald-400' },\n    { key: 'sys', label: 'BP Systolic', getValue: (v: VitalReading) => v.bpSystolic, color: 'text-violet-600 dark:text-violet-400' },\n    { key: 'dia', label: '   Diastolic', getValue: (v: VitalReading) => v.bpDiastolic, color: 'text-violet-500 dark:text-violet-300' },\n    { key: 'sos', label: 'SOS score', getValue: (v: VitalReading) => v.sosScore, color: '', getColor: (val?: number) => val !== undefined ? (val >= 3 ? 'text-red-600 dark:text-red-400' : val >= 2 ? 'text-amber-600 dark:text-amber-400' : 'text-emerald-600 dark:text-emerald-400') : '' },\n    { key: 'o2sat', label: 'O₂ saturation', getValue: (v: VitalReading) => v.o2Saturation, color: 'text-cyan-600 dark:text-cyan-400', getColor: (val?: number) => val !== undefined && val < 95 ? 'text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20' : 'text-cyan-600 dark:text-cyan-400' },\n    { key: 'o2th', label: 'O₂ therapy', getValue: (v: VitalReading) => v.o2Therapy, color: 'text-slate-500 dark:text-slate-400 text-[9px]' },\n  ];\n  \n  return (\n    <div className=\"overflow-x-auto\">\n      <table className={`w-full border-collapse ${fontSize}`}>\n        <tbody>\n          {rows.map(row => (\n            <tr key={row.key} className=\"border-b border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/50\">\n              <td className=\"py-1.5 px-2 font-medium text-slate-700 dark:text-slate-300 bg-slate-50 dark:bg-slate-800/50 whitespace-nowrap w-24 border-r border-slate-200 dark:border-slate-700\">{row.label}</td>\n              {displayRecords.map(record => record.vitals.map((vital, idx) => {\n                const val = row.getValue(vital);\n                const colorClass = row.getColor ? row.getColor(val as number) : row.color;\n                return (\n                  <td key={`${record.id}-${row.key}-${idx}`} className={`${cellWidth} text-center py-1.5 border-r border-slate-100 dark:border-slate-700/50 font-medium ${colorClass}`}>\n                    {val ?? '-'}\n                  </td>\n                );\n              }))}\n            </tr>\n          ))}\n          \n          <tr className=\"border-b-2 border-amber-200 dark:border-amber-700 bg-amber-50/50 dark:bg-amber-900/10\">\n            <td className=\"py-2 px-2 font-medium bg-amber-50 dark:bg-amber-900/20 whitespace-nowrap border-r border-slate-200 dark:border-slate-700\">\n              <div className=\"text-amber-700 dark:text-amber-400 font-semibold text-[11px]\">Pain scale</div>\n              <div className=\"flex gap-0.5 mt-1\">{[2,4,6,8].map(l => <div key={l} className={`w-1.5 rounded-sm ${l<=2?'bg-emerald-400 h-1':l<=4?'bg-yellow-400 h-1.5':l<=6?'bg-amber-400 h-2':'bg-red-400 h-2.5'}`}/>)}</div>\n            </td>\n            {displayRecords.map(record => record.vitals.map((vital, idx) => {\n              const pain = vital.painScore;\n              return (\n                <td key={`${record.id}-pain-${idx}`} className={`${cellWidth} text-center py-1.5 border-r border-amber-100 dark:border-amber-800/30`}>\n                  {pain !== undefined ? (\n                    <div className=\"flex flex-col items-center\">\n                      <span className={`font-bold ${pain<=2?'text-emerald-600 dark:text-emerald-400':pain<=4?'text-yellow-600 dark:text-yellow-400':pain<=6?'text-amber-600 dark:text-amber-400':'text-red-600 dark:text-red-400'}`}>{pain}</span>\n                      <div className=\"w-full h-1 bg-slate-200 dark:bg-slate-700 rounded-full mt-0.5 overflow-hidden\">\n                        <div className={`h-full rounded-full ${pain<=2?'bg-emerald-500':pain<=4?'bg-yellow-500':pain<=6?'bg-amber-500':'bg-red-500'}`} style={{width:`${(pain/10)*100}%`}}/>\n                      </div>\n                    </div>\n                  ) : '-'}\n                </td>\n              );\n            }))}\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  );\n};\n\n// ============================================\n// Medication Table Component\n// ============================================\n\nconst MedicationTable = ({ records, dayRange }: { records: TPRDayRecord[]; dayRange: DayRange }) => {\n  const displayRecords = records.slice(0, dayRange).reverse();\n  const cellWidth = dayRange <= 3 ? 'w-10' : 'w-8';\n  const fontSize = dayRange <= 3 ? 'text-xs' : 'text-[10px]';\n  \n  return (\n    <div className=\"overflow-x-auto\">\n      <table className={`w-full border-collapse ${fontSize}`}>\n        <tbody>\n          <tr className=\"bg-violet-500 dark:bg-violet-600 text-white\">\n            <td colSpan={1 + displayRecords.length * 6} className=\"py-1.5 px-2 font-semibold text-xs\">\n              <Pill className=\"w-3 h-3 inline mr-1.5\" />Medication\n            </td>\n          </tr>\n          {['continuous dose', 'prn dose'].map((label, rowIdx) => (\n            <tr key={label} className=\"border-b border-slate-200 dark:border-slate-700 hover:bg-violet-50/30 dark:hover:bg-violet-900/10\">\n              <td className=\"py-1.5 px-2 font-medium text-slate-700 dark:text-slate-300 bg-violet-50 dark:bg-violet-900/20 whitespace-nowrap w-24 border-r border-slate-200 dark:border-slate-700\">{label}</td>\n              {displayRecords.map(record => record.medications.map((med, idx) => (\n                <td key={`${record.id}-med${rowIdx}-${idx}`} className={`${cellWidth} text-center py-1.5 border-r border-violet-100 dark:border-violet-800/30 text-violet-700 dark:text-violet-300 font-medium`}>\n                  {rowIdx === 0 ? (med.continuousDose || '-') : (med.prnDose || '-')}\n                </td>\n              )))}\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n\n// ============================================\n// Fluid Balance Table Component\n// ============================================\n\nconst FluidTable = ({ records, dayRange }: { records: TPRDayRecord[]; dayRange: DayRange }) => {\n  const displayRecords = records.slice(0, dayRange).reverse();\n  const fontSize = dayRange <= 3 ? 'text-xs' : 'text-[10px]';\n  const shiftColSpan = 2;\n  const cellWidth = dayRange <= 3 ? 'w-20' : 'w-16';\n  \n  const getDayTotals = (record: TPRDayRecord) => {\n    const totalIntake = record.fluids.reduce((sum, f) => sum + (f.totalIntake || 0), 0);\n    const totalOutput = record.fluids.reduce((sum, f) => sum + (f.totalOutput || 0), 0);\n    return { totalIntake, totalOutput, balance: totalIntake - totalOutput };\n  };\n  \n  return (\n    <div className=\"overflow-x-auto\">\n      <table className={`w-full border-collapse ${fontSize}`}>\n        <thead>\n          <tr className=\"bg-slate-100 dark:bg-slate-800\">\n            <th className=\"py-1.5 px-2 text-left font-semibold text-slate-700 dark:text-slate-300 w-24 border-r border-slate-200 dark:border-slate-700\" rowSpan={2}>\n              <Droplets className=\"w-3.5 h-3.5 inline mr-1 text-cyan-600 dark:text-cyan-400\" />Fluid\n            </th>\n            {displayRecords.map(record => (\n              <th key={`h-${record.id}`} colSpan={6} className=\"py-1 text-center font-semibold text-slate-600 dark:text-slate-400 border-r border-slate-300 dark:border-slate-600 border-b border-slate-200 dark:border-slate-700\">{record.dateShort}</th>\n            ))}\n          </tr>\n          <tr className=\"bg-slate-50 dark:bg-slate-800/50\">\n            {displayRecords.map(record => SHIFTS.map((shift, idx) => (\n              <th key={`${record.id}-sh-${idx}`} colSpan={shiftColSpan} className={`py-1 text-center font-medium border-r ${idx===2?'border-slate-300 dark:border-slate-600':'border-slate-200 dark:border-slate-700'} text-slate-600 dark:text-slate-400`}>\n                {shift.labelTh}<span className=\"block text-[8px] text-slate-400 dark:text-slate-500\">{shift.timeRange}</span>\n              </th>\n            )))}\n          </tr>\n        </thead>\n        <tbody>\n          <tr className=\"bg-cyan-500 dark:bg-cyan-600 text-white\">\n            <td colSpan={1 + displayRecords.length * 6} className=\"py-1 px-2 font-semibold text-xs\">\n              <Droplets className=\"w-3 h-3 inline mr-1\" />Fluid Intake (ml)\n            </td>\n          </tr>\n          {['Oral fluid', 'Parenteral'].map((label, rowIdx) => (\n            <tr key={label} className=\"border-b border-slate-200 dark:border-slate-700 hover:bg-cyan-50/30 dark:hover:bg-cyan-900/10\">\n              <td className=\"py-1.5 px-2 text-slate-700 dark:text-slate-300 bg-slate-50 dark:bg-slate-800/50 whitespace-nowrap border-r border-slate-200 dark:border-slate-700 pl-3 font-medium\">{label}</td>\n              {displayRecords.map(record => record.fluids.map((fluid, idx) => (\n                <td key={`${record.id}-in${rowIdx}-${idx}`} colSpan={shiftColSpan} className={`${cellWidth} text-center py-1.5 border-r ${idx===2?'border-slate-300 dark:border-slate-600':'border-slate-200 dark:border-slate-700'} text-cyan-700 dark:text-cyan-300 font-medium`}>\n                  {rowIdx === 0 ? (fluid.oralFluid || '-') : (fluid.parenteral || '-')}\n                </td>\n              )))}\n            </tr>\n          ))}\n          <tr className=\"border-b-2 border-cyan-200 dark:border-cyan-700 bg-cyan-50 dark:bg-cyan-900/20\">\n            <td className=\"py-1.5 px-2 font-bold text-cyan-800 dark:text-cyan-300 bg-cyan-100 dark:bg-cyan-800/30 whitespace-nowrap border-r border-slate-200 dark:border-slate-700 pl-3\">Total</td>\n            {displayRecords.map(record => record.fluids.map((fluid, idx) => (\n              <td key={`${record.id}-tin-${idx}`} colSpan={shiftColSpan} className={`${cellWidth} text-center py-1.5 border-r ${idx===2?'border-cyan-200 dark:border-cyan-700':'border-cyan-100 dark:border-cyan-800'} text-cyan-800 dark:text-cyan-200 font-bold`}>{fluid.totalIntake || '-'}</td>\n            )))}\n          </tr>\n          \n          <tr className=\"bg-amber-500 dark:bg-amber-600 text-white\">\n            <td colSpan={1 + displayRecords.length * 6} className=\"py-1 px-2 font-semibold text-xs\">\n              <Beaker className=\"w-3 h-3 inline mr-1\" />Fluid Output (ml)\n            </td>\n          </tr>\n          {['Urine', 'Drainage'].map((label, rowIdx) => (\n            <tr key={label} className=\"border-b border-slate-200 dark:border-slate-700 hover:bg-amber-50/30 dark:hover:bg-amber-900/10\">\n              <td className=\"py-1.5 px-2 text-slate-700 dark:text-slate-300 bg-slate-50 dark:bg-slate-800/50 whitespace-nowrap border-r border-slate-200 dark:border-slate-700 pl-3 font-medium\">{label}</td>\n              {displayRecords.map(record => record.fluids.map((fluid, idx) => (\n                <td key={`${record.id}-out${rowIdx}-${idx}`} colSpan={shiftColSpan} className={`${cellWidth} text-center py-1.5 border-r ${idx===2?'border-slate-300 dark:border-slate-600':'border-slate-200 dark:border-slate-700'} text-amber-700 dark:text-amber-300 font-medium`}>\n                  {rowIdx === 0 ? (fluid.urine || '-') : (fluid.drainage || '-')}\n                </td>\n              )))}\n            </tr>\n          ))}\n          <tr className=\"border-b-2 border-amber-200 dark:border-amber-700 bg-amber-50 dark:bg-amber-900/20\">\n            <td className=\"py-1.5 px-2 font-bold text-amber-800 dark:text-amber-300 bg-amber-100 dark:bg-amber-800/30 whitespace-nowrap border-r border-slate-200 dark:border-slate-700 pl-3\">Total</td>\n            {displayRecords.map(record => record.fluids.map((fluid, idx) => (\n              <td key={`${record.id}-tout-${idx}`} colSpan={shiftColSpan} className={`${cellWidth} text-center py-1.5 border-r ${idx===2?'border-amber-200 dark:border-amber-700':'border-amber-100 dark:border-amber-800'} text-amber-800 dark:text-amber-200 font-bold`}>{fluid.totalOutput || '-'}</td>\n            )))}\n          </tr>\n          \n          <tr className=\"border-b border-slate-200 dark:border-slate-700\">\n            <td className=\"py-1.5 px-2 text-slate-700 dark:text-slate-300 bg-slate-50 dark:bg-slate-800/50 border-r border-slate-200 dark:border-slate-700 font-medium\">Stool</td>\n            {displayRecords.map(record => (\n              <td key={`${record.id}-stool`} colSpan={6} className=\"text-center py-1.5 border-r border-slate-300 dark:border-slate-600 text-slate-600 dark:text-slate-400\">{record.stool || '-'}</td>\n            ))}\n          </tr>\n          <tr className=\"border-b border-slate-200 dark:border-slate-700\">\n            <td className=\"py-1.5 px-2 text-slate-700 dark:text-slate-300 bg-slate-50 dark:bg-slate-800/50 border-r border-slate-200 dark:border-slate-700 font-medium\">ประเภทผู้ป่วย</td>\n            {displayRecords.map(record => (\n              <td key={`${record.id}-pt`} colSpan={6} className=\"text-center py-2 border-r border-slate-300 dark:border-slate-600\"><PatientTypeBadge type={record.patientType} size=\"lg\" /></td>\n            ))}\n          </tr>\n          <tr className=\"bg-slate-100 dark:bg-slate-800\">\n            <td className=\"py-2 px-2 font-bold text-slate-800 dark:text-slate-200 bg-slate-200 dark:bg-slate-700 border-r border-slate-200 dark:border-slate-700\">I/O Balance</td>\n            {displayRecords.map(record => {\n              const t = getDayTotals(record);\n              return (\n                <td key={`${record.id}-bal`} colSpan={6} className=\"text-center py-2 border-r border-slate-300 dark:border-slate-600\">\n                  <span className=\"text-xs text-slate-500 dark:text-slate-400\">{t.totalIntake} - {t.totalOutput} = </span>\n                  <span className={`font-bold ${t.balance>=0?'text-emerald-600 dark:text-emerald-400':'text-red-600 dark:text-red-400'}`}>{t.balance>=0?'+':''}{t.balance} ml</span>\n                </td>\n              );\n            })}\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  );\n};\n\n// ============================================\n// Patient Info Row\n// ============================================\n\nconst PatientInfoRow = ({ records, dayRange }: { records: TPRDayRecord[]; dayRange: DayRange }) => {\n  const displayRecords = records.slice(0, dayRange).reverse();\n  return (\n    <div className=\"overflow-x-auto\">\n      <table className=\"w-full border-collapse text-xs\">\n        <tbody>\n          <tr className=\"border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50\">\n            <td className=\"py-2 px-2 font-semibold text-slate-700 dark:text-slate-300 bg-slate-100 dark:bg-slate-800 whitespace-nowrap w-24 border-r border-slate-200 dark:border-slate-700\">\n              <Scale className=\"w-3.5 h-3.5 inline mr-1 text-emerald-600 dark:text-emerald-400\" />Wt/Ht/Diet\n            </td>\n            {displayRecords.map(record => (\n              <td key={`${record.id}-wt`} colSpan={6} className=\"text-center py-2 border-r border-slate-300 dark:border-slate-600\">\n                <span className=\"text-slate-500 dark:text-slate-400 text-[10px]\">Wt:</span>\n                <span className=\"font-bold text-slate-700 dark:text-slate-300 ml-0.5\">{record.weight}kg</span>\n                <span className=\"text-slate-300 dark:text-slate-600 mx-1.5\">/</span>\n                <span className=\"text-slate-500 dark:text-slate-400 text-[10px]\">Ht:</span>\n                <span className=\"font-bold text-slate-700 dark:text-slate-300 ml-0.5\">{record.height}cm</span>\n                <span className=\"text-slate-300 dark:text-slate-600 mx-1.5\">/</span>\n                <span className=\"inline-flex items-center gap-1 px-2 py-0.5 bg-emerald-100 dark:bg-emerald-900/30 rounded\">\n                  <Utensils className=\"w-3 h-3 text-emerald-600 dark:text-emerald-400\" />\n                  <span className=\"font-semibold text-emerald-700 dark:text-emerald-300\">{record.diet}</span>\n                </span>\n              </td>\n            ))}\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  );\n};\n\n// ============================================\n// Header Row\n// ============================================\n\nconst HeaderRow = ({ records, dayRange }: { records: TPRDayRecord[]; dayRange: DayRange }) => {\n  const displayRecords = records.slice(0, dayRange).reverse();\n  const cellWidth = dayRange <= 3 ? 'w-10' : 'w-8';\n  const fontSize = dayRange <= 3 ? 'text-xs' : 'text-[10px]';\n  \n  return (\n    <div className={`overflow-x-auto bg-gradient-to-r from-teal-600 to-cyan-600 dark:from-teal-700 dark:to-cyan-700 text-white rounded-t-xl ${fontSize}`}>\n      <table className=\"w-full border-collapse\">\n        <thead>\n          <tr>\n            <th className=\"py-2 px-2 text-left font-semibold w-24 border-r border-teal-500 dark:border-teal-600\">Date</th>\n            {displayRecords.map(record => (\n              <th key={`d-${record.id}`} colSpan={6} className=\"py-2 px-1 text-center font-bold border-r border-teal-500 dark:border-teal-600 bg-teal-700/30 dark:bg-teal-800/30\">{record.date}</th>\n            ))}\n          </tr>\n          <tr className=\"bg-teal-700/20 dark:bg-teal-800/20\">\n            <th className=\"py-1 px-2 text-left text-teal-100 font-medium border-r border-teal-500 dark:border-teal-600\">Day Admission</th>\n            {displayRecords.map(record => (\n              <th key={`a-${record.id}`} colSpan={6} className=\"py-1 px-1 text-center border-r border-teal-500 dark:border-teal-600\">\n                <span className=\"bg-white dark:bg-slate-800 text-teal-700 dark:text-teal-300 px-2 py-0.5 rounded font-bold text-xs\">Day {record.dayAdmission}</span>\n              </th>\n            ))}\n          </tr>\n          <tr className=\"bg-teal-700/10 dark:bg-teal-800/10\">\n            <th className=\"py-1 px-2 text-left text-teal-100 font-medium border-r border-teal-500 dark:border-teal-600\">after Operation</th>\n            {displayRecords.map(record => (\n              <th key={`o-${record.id}`} colSpan={6} className=\"py-1 px-1 text-center border-r border-teal-500 dark:border-teal-600\">\n                {record.dayAfterOperation ? <span className=\"bg-amber-400 dark:bg-amber-500 text-amber-900 dark:text-amber-100 px-2 py-0.5 rounded font-bold text-xs\">POD {record.dayAfterOperation}</span> : '-'}\n              </th>\n            ))}\n          </tr>\n          <tr className=\"bg-teal-800/30 dark:bg-teal-900/30\">\n            <th className=\"py-1.5 px-2 text-left font-medium border-r border-teal-500 dark:border-teal-600\">\n              <span className=\"text-teal-200\">Pulse</span><span className=\"text-white ml-2\">C°</span>\n            </th>\n            {displayRecords.map(record => TIME_LABELS.map((time, idx) => (\n              <th key={`t-${record.id}-${idx}`} className={`${cellWidth} py-1.5 text-center font-bold border-r border-teal-500/50 dark:border-teal-600/50`}>{time}</th>\n            )))}\n          </tr>\n        </thead>\n      </table>\n    </div>\n  );\n};\n\n// ============================================\n// Legend Component\n// ============================================\n\nconst Legend = () => (\n  <div className=\"mt-3 p-4 bg-slate-50 dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700\">\n    <div className=\"grid grid-cols-2 gap-6\">\n      <div className=\"border-r border-slate-200 dark:border-slate-700 pr-4\">\n        <h4 className=\"text-sm font-bold text-slate-700 dark:text-slate-300 mb-2\">ประเภทผู้ป่วย :</h4>\n        <div className=\"grid grid-cols-2 gap-2 text-xs\">\n          {Object.entries(PATIENT_TYPES).map(([key, cfg]) => (\n            <div key={key} className=\"flex items-center gap-2\">\n              <span className={`${cfg.bg} text-white px-2 py-0.5 rounded font-semibold text-[10px]`}>{key}</span>\n              <span className=\"text-slate-600 dark:text-slate-400\">= {cfg.fullLabel}</span>\n            </div>\n          ))}\n        </div>\n      </div>\n      <div>\n        <h4 className=\"text-sm font-bold text-slate-700 dark:text-slate-300 mb-2\">Medication :</h4>\n        <div className=\"grid grid-cols-2 gap-x-4 gap-y-1 text-xs\">\n          {MEDICATION_CODES.map(m => (\n            <div key={m.code} className=\"flex items-center gap-2\">\n              <span className=\"text-violet-600 dark:text-violet-400 font-bold min-w-[20px]\">{m.code}</span>\n              <span className=\"text-slate-600 dark:text-slate-400\">= {m.name}</span>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n    <div className=\"mt-3 pt-3 border-t border-slate-200 dark:border-slate-700 flex items-center justify-center gap-6 text-xs\">\n      <div className=\"flex items-center gap-1.5\"><div className=\"w-3 h-3 rounded-full bg-teal-500 dark:bg-teal-400\" /><span className=\"text-teal-700 dark:text-teal-300\">= Temperature</span></div>\n      <div className=\"flex items-center gap-1.5\"><span className=\"text-rose-400 dark:text-rose-300 font-bold\">×</span><span className=\"text-rose-600 dark:text-rose-300\">= Pulse</span></div>\n      <div className=\"flex items-center gap-1.5\"><div className=\"w-4 h-0.5 bg-emerald-400 dark:bg-emerald-500\" /><span className=\"text-emerald-600 dark:text-emerald-400\">= 37°C line</span></div>\n    </div>\n  </div>\n);\n\n// ============================================\n// Day Range Selector\n// ============================================\n\nconst DayRangeSelector = ({ value, onChange }: { value: DayRange; onChange: (range: DayRange) => void }) => (\n  <div className=\"flex items-center bg-slate-100 dark:bg-slate-700 rounded-xl p-1\">\n    {DAY_RANGE_OPTIONS.map(opt => (\n      <button key={opt.value} onClick={() => onChange(opt.value)} className={`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${value === opt.value ? 'bg-gradient-to-r from-teal-500 to-cyan-500 text-white shadow-md' : 'text-slate-600 dark:text-slate-300 hover:bg-white dark:hover:bg-slate-600'}`}>\n        {opt.label}\n      </button>\n    ))}\n  </div>\n);\n\n// ============================================\n// Fullscreen TPR Chart\n// ============================================\n\nconst FullscreenTPRChart = ({ records, initialDayRange = 7, onClose }: { records: TPRDayRecord[]; initialDayRange?: DayRange; onClose: () => void }) => {\n  const [dayRange, setDayRange] = useState<DayRange>(initialDayRange);\n  const [startIndex, setStartIndex] = useState(0);\n  const [zoom, setZoom] = useState(1);\n  const [isSaving, setIsSaving] = useState(false);\n  const [saveSuccess, setSaveSuccess] = useState(false);\n  \n  const displayedRecords = useMemo(() => records.slice(startIndex, startIndex + dayRange), [records, startIndex, dayRange]);\n  const canGoBack = startIndex + dayRange < records.length;\n  const canGoForward = startIndex > 0;\n  \n  const handleGoBack = useCallback(() => { if (canGoBack) setStartIndex(prev => Math.min(prev + 1, records.length - dayRange)); }, [canGoBack, records.length, dayRange]);\n  const handleGoForward = useCallback(() => { if (canGoForward) setStartIndex(prev => Math.max(prev - 1, 0)); }, [canGoForward]);\n  \n  useEffect(() => { if (startIndex + dayRange > records.length) setStartIndex(Math.max(0, records.length - dayRange)); }, [dayRange, records.length, startIndex]);\n  \n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === 'Escape') onClose();\n      if (e.key === 'ArrowLeft') handleGoBack();\n      if (e.key === 'ArrowRight') handleGoForward();\n    };\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [onClose, handleGoBack, handleGoForward]);\n\n  const handleSave = async () => { setIsSaving(true); await new Promise(r => setTimeout(r, 1000)); setIsSaving(false); setSaveSuccess(true); setTimeout(() => setSaveSuccess(false), 2000); };\n  \n  const dateRangeText = displayedRecords.length > 0 ? `${displayedRecords[displayedRecords.length - 1]?.dateShort} - ${displayedRecords[0]?.dateShort}` : '';\n  const canvasWidth = 150 + (dayRange * 6 * (dayRange <= 3 ? 42 : 34));\n\n  return (\n    <div className=\"fixed inset-0 z-50 bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-900 dark:to-slate-800 flex flex-col\">\n      <div className=\"flex items-center justify-between px-4 py-3 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 shadow-sm shrink-0\">\n        <div className=\"flex items-center gap-3\">\n          <button onClick={onClose} className=\"flex items-center gap-2 px-3 py-2 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 border border-slate-200 dark:border-slate-600 rounded-xl transition-all\">\n            <ArrowLeft className=\"w-4 h-4\" /><span className=\"text-sm font-medium hidden sm:inline\">กลับ</span>\n          </button>\n          <div className=\"p-2 rounded-xl bg-gradient-to-br from-teal-500 to-cyan-500 text-white shadow-lg\">\n            <BarChart3 className=\"w-5 h-5\" />\n          </div>\n          <div className=\"hidden md:block\">\n            <h1 className=\"font-bold text-slate-800 dark:text-white text-base\">ฟอร์มปรอท - TPR Chart</h1>\n            <p className=\"text-xs text-slate-500 dark:text-slate-400\">{dayRange} วัน • {dateRangeText}</p>\n          </div>\n        </div>\n        \n        <div className=\"flex items-center gap-3\">\n          <button onClick={handleGoBack} disabled={!canGoBack} className={`p-2 rounded-lg ${canGoBack ? 'hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300' : 'text-slate-300 dark:text-slate-600 cursor-not-allowed'}`}><ChevronLeft className=\"w-5 h-5\" /></button>\n          <DayRangeSelector value={dayRange} onChange={setDayRange} />\n          <button onClick={handleGoForward} disabled={!canGoForward} className={`p-2 rounded-lg ${canGoForward ? 'hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300' : 'text-slate-300 dark:text-slate-600 cursor-not-allowed'}`}><ChevronRight className=\"w-5 h-5\" /></button>\n        </div>\n        \n        <div className=\"flex items-center gap-2\">\n          <div className=\"hidden md:flex items-center bg-slate-100 dark:bg-slate-700 rounded-lg p-1\">\n            <button onClick={() => setZoom(p => Math.max(p - 0.1, 0.5))} className=\"w-7 h-7 rounded flex items-center justify-center hover:bg-white dark:hover:bg-slate-600\"><ZoomOut className=\"w-4 h-4\" /></button>\n            <span className=\"w-12 text-center text-xs font-medium text-slate-600 dark:text-slate-300\">{Math.round(zoom * 100)}%</span>\n            <button onClick={() => setZoom(p => Math.min(p + 0.1, 2))} className=\"w-7 h-7 rounded flex items-center justify-center hover:bg-white dark:hover:bg-slate-600\"><ZoomIn className=\"w-4 h-4\" /></button>\n          </div>\n          <button onClick={() => window.print()} className=\"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg\"><Printer className=\"w-5 h-5 text-slate-500 dark:text-slate-400\" /></button>\n          <button className=\"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg\"><Download className=\"w-5 h-5 text-slate-500 dark:text-slate-400\" /></button>\n          <button onClick={handleSave} disabled={isSaving} className={`h-9 px-4 flex items-center gap-2 rounded-xl font-medium text-sm ${saveSuccess ? 'bg-emerald-500 text-white' : 'bg-gradient-to-r from-teal-500 to-cyan-500 text-white shadow-md'}`}>\n            {isSaving ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : saveSuccess ? <Check className=\"w-4 h-4\" /> : <Save className=\"w-4 h-4\" />}\n            <span className=\"hidden sm:inline\">{saveSuccess ? 'บันทึกแล้ว' : 'บันทึก'}</span>\n          </button>\n          <button onClick={onClose} className=\"p-2 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg\"><X className=\"w-5 h-5 text-slate-500 dark:text-slate-400\" /></button>\n        </div>\n      </div>\n\n      <div className=\"flex-1 overflow-auto p-4\">\n        <div className=\"bg-white dark:bg-slate-800 shadow-xl rounded-2xl mx-auto border border-slate-200 dark:border-slate-700\" style={{ width: `${Math.max(canvasWidth, 900)}px`, transform: `scale(${zoom})`, transformOrigin: 'top center' }}>\n          <div className=\"text-center py-3 bg-gradient-to-r from-teal-50 to-cyan-50 dark:from-teal-900/20 dark:to-cyan-900/20 border-b border-slate-200 dark:border-slate-700 rounded-t-2xl\">\n            <h1 className=\"text-lg font-bold text-teal-700 dark:text-teal-300\">ฟอร์มปรอท โรงพยาบาล</h1>\n            <p className=\"text-xs text-slate-500 dark:text-slate-400\">TPR Chart - Temperature, Pulse, Respiration</p>\n          </div>\n          \n          <div className=\"px-4 py-2 bg-slate-50 dark:bg-slate-800/50 border-b border-slate-200 dark:border-slate-700 flex items-center justify-between\">\n            <div className=\"flex items-center gap-4 text-sm\">\n              <div><span className=\"text-slate-500 dark:text-slate-400\">ชื่อ:</span> <span className=\"font-semibold text-slate-800 dark:text-slate-200\">นายสมชาย ใจดี</span></div>\n              <div><span className=\"text-slate-500 dark:text-slate-400\">HN:</span> <span className=\"font-mono font-semibold text-slate-800 dark:text-slate-200\">6712345</span></div>\n              <div><span className=\"text-slate-500 dark:text-slate-400\">AN:</span> <span className=\"font-mono font-semibold text-slate-800 dark:text-slate-200\">670001234</span></div>\n              <div><span className=\"text-slate-500 dark:text-slate-400\">Ward:</span> <span className=\"font-semibold text-slate-800 dark:text-slate-200\">อายุรกรรม ชาย 1</span></div>\n            </div>\n          </div>\n          \n          <HeaderRow records={displayedRecords} dayRange={dayRange} />\n          <div className=\"border-b border-slate-200 dark:border-slate-700 p-2\"><TPRGraph records={displayedRecords} dayRange={dayRange} width={Math.max(canvasWidth - 20, 880)} height={280} /></div>\n          <VitalsTable records={displayedRecords} dayRange={dayRange} />\n          <MedicationTable records={displayedRecords} dayRange={dayRange} />\n          <PatientInfoRow records={displayedRecords} dayRange={dayRange} />\n          <FluidTable records={displayedRecords} dayRange={dayRange} />\n          <div className=\"p-4\"><Legend /></div>\n        </div>\n      </div>\n\n      <div className=\"fixed bottom-4 left-1/2 -translate-x-1/2 bg-slate-800 dark:bg-slate-700 text-white px-4 py-2 rounded-full text-sm shadow-xl flex items-center gap-3\">\n        <span className=\"text-slate-300\">← → เลื่อนวัน</span>\n        <span className=\"text-slate-500\">|</span>\n        <span className=\"text-slate-300\">ESC ปิด</span>\n      </div>\n    </div>\n  );\n};\n\n// ============================================\n// Main TPR Chart Tab Component\n// ============================================\n\nexport function TPRChartTab() {\n  const [isFullscreen, setIsFullscreen] = useState(false);\n  const [dayRange, setDayRange] = useState<DayRange>(7);\n\n  const latestRecord = mockTPRRecords[0];\n  const latestVitals = latestRecord.vitals[latestRecord.vitals.length - 1];\n\n  if (isFullscreen) return <FullscreenTPRChart records={mockTPRRecords} initialDayRange={dayRange} onClose={() => setIsFullscreen(false)} />;\n\n  return (\n    <div className=\"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 overflow-hidden\">\n      <div className=\"px-4 py-3 border-b border-slate-200 dark:border-slate-700 bg-gradient-to-r from-slate-50 to-teal-50/50 dark:from-slate-800 dark:to-teal-900/20\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"p-2 rounded-xl bg-gradient-to-br from-teal-500 to-cyan-500 text-white shadow-lg shadow-teal-500/20\">\n              <Activity className=\"w-5 h-5\" />\n            </div>\n            <div>\n              <h2 className=\"font-bold text-slate-800 dark:text-white text-base\">ฟอร์มปรอท - TPR Chart</h2>\n              <p className=\"text-xs text-slate-500 dark:text-slate-400\">Temperature, Pulse, Respiration Record</p>\n            </div>\n          </div>\n          <div className=\"flex items-center gap-3\">\n            <div className=\"hidden md:flex items-center gap-2\">\n              <div className=\"px-3 py-1.5 bg-teal-100 dark:bg-teal-900/30 rounded-lg flex items-center gap-2\">\n                <ThermometerSun className=\"w-4 h-4 text-teal-600 dark:text-teal-400\" />\n                <span className=\"text-sm font-bold text-teal-700 dark:text-teal-300\">{latestVitals?.temperature?.toFixed(1)}°C</span>\n              </div>\n              <div className=\"px-3 py-1.5 bg-rose-100 dark:bg-rose-900/30 rounded-lg flex items-center gap-2\">\n                <Heart className=\"w-4 h-4 text-rose-500 dark:text-rose-400\" />\n                <span className=\"text-sm font-bold text-rose-600 dark:text-rose-300\">{latestVitals?.pulse} bpm</span>\n              </div>\n              <PatientTypeBadge type={latestRecord.patientType} size=\"lg\" />\n            </div>\n            <button onClick={() => setIsFullscreen(true)} className=\"px-4 py-2 bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 text-white rounded-xl text-sm font-semibold flex items-center gap-2 shadow-lg shadow-teal-500/20 transition-all hover:scale-105\">\n              <Maximize2 className=\"w-4 h-4\" /><span className=\"hidden md:inline\">ดูฟอร์มเต็ม</span>\n            </button>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"px-4 py-3 border-b border-slate-200 dark:border-slate-700 flex items-center justify-between\">\n        <div className=\"flex items-center gap-2\">\n          <TrendingUp className=\"w-4 h-4 text-teal-500\" />\n          <span className=\"text-sm font-medium text-slate-700 dark:text-slate-300\">แสดงแนวโน้ม</span>\n        </div>\n        <DayRangeSelector value={dayRange} onChange={setDayRange} />\n      </div>\n\n      <div className=\"p-4 bg-gradient-to-br from-white to-slate-50 dark:from-slate-800 dark:to-slate-800/50 overflow-x-auto\">\n        <TPRGraph records={mockTPRRecords.slice(0, dayRange)} dayRange={dayRange} width={dayRange === 1 ? 500 : dayRange === 3 ? 650 : dayRange === 5 ? 800 : 950} height={200} />\n      </div>\n\n      <div className=\"px-4 py-3 bg-slate-50 dark:bg-slate-800/50 border-t border-slate-200 dark:border-slate-700\">\n        <div className=\"flex items-center justify-between text-xs\">\n          <div className=\"flex items-center gap-4 text-slate-500 dark:text-slate-400\">\n            <span>ข้อมูล {mockTPRRecords.length} วัน</span>\n            <span className=\"text-slate-300 dark:text-slate-600\">|</span>\n            <span>ล่าสุด: {latestRecord.date}</span>\n            <span className=\"text-slate-300 dark:text-slate-600\">|</span>\n            <span>Day {latestRecord.dayAdmission}</span>\n          </div>\n          <button onClick={() => setIsFullscreen(true)} className=\"flex items-center gap-1 text-teal-600 dark:text-teal-400 hover:text-teal-700 dark:hover:text-teal-300 font-medium\">\n            ดูรายละเอียด<ChevronRight className=\"w-4 h-4\" />\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}}]
}