{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/auto/programming/gwt/gwt-his-project/his-web/src/components/providers/ThemeProvider.tsx"],"sourcesContent":["'use client';\n\nimport { createContext, useContext, useEffect, useState, ReactNode } from 'react';\n\ntype Theme = 'light' | 'dark';\n\ninterface ThemeContextType {\n  theme: Theme;\n  toggleTheme: () => void;\n  setTheme: (theme: Theme) => void;\n}\n\nconst ThemeContext = createContext<ThemeContextType | null>(null);\n\ninterface ThemeProviderProps {\n  children: ReactNode;\n}\n\nexport function ThemeProvider({ children }: ThemeProviderProps) {\n  const [theme, setThemeState] = useState<Theme>('light');\n  const [mounted, setMounted] = useState(false);\n\n  useEffect(() => {\n    // Check localStorage and system preference\n    const stored = localStorage.getItem('theme') as Theme | null;\n    const systemPreference = window.matchMedia('(prefers-color-scheme: dark)').matches\n      ? 'dark'\n      : 'light';\n    \n    const initialTheme = stored || systemPreference;\n    setThemeState(initialTheme);\n    \n    // Apply theme to document\n    if (initialTheme === 'dark') {\n      document.documentElement.classList.add('dark');\n    } else {\n      document.documentElement.classList.remove('dark');\n    }\n    \n    setMounted(true);\n  }, []);\n\n  const setTheme = (newTheme: Theme) => {\n    setThemeState(newTheme);\n    localStorage.setItem('theme', newTheme);\n    \n    // Apply theme to document\n    if (newTheme === 'dark') {\n      document.documentElement.classList.add('dark');\n    } else {\n      document.documentElement.classList.remove('dark');\n    }\n  };\n\n  const toggleTheme = () => {\n    setTheme(theme === 'dark' ? 'light' : 'dark');\n  };\n\n  const value: ThemeContextType = {\n    theme,\n    toggleTheme,\n    setTheme,\n  };\n\n  // Always provide context\n  return (\n    <ThemeContext.Provider value={value}>\n      {mounted ? children : (\n        <div className=\"min-h-screen bg-slate-50 flex items-center justify-center\">\n          <div className=\"w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin\" />\n        </div>\n      )}\n    </ThemeContext.Provider>\n  );\n}\n\nexport function useTheme() {\n  const context = useContext(ThemeContext);\n  if (context === null) {\n    throw new Error('useTheme must be used within a ThemeProvider');\n  }\n  return context;\n}"],"names":[],"mappings":";;;;;;;AAEA;;;AAFA;;AAYA,MAAM,6BAAe,IAAA,8KAAa,EAA0B;AAMrD,SAAS,cAAc,EAAE,QAAQ,EAAsB;;IAC5D,MAAM,CAAC,OAAO,cAAc,GAAG,IAAA,yKAAQ,EAAQ;IAC/C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,IAAA,0KAAS;mCAAC;YACR,2CAA2C;YAC3C,MAAM,SAAS,aAAa,OAAO,CAAC;YACpC,MAAM,mBAAmB,OAAO,UAAU,CAAC,gCAAgC,OAAO,GAC9E,SACA;YAEJ,MAAM,eAAe,UAAU;YAC/B,cAAc;YAEd,0BAA0B;YAC1B,IAAI,iBAAiB,QAAQ;gBAC3B,SAAS,eAAe,CAAC,SAAS,CAAC,GAAG,CAAC;YACzC,OAAO;gBACL,SAAS,eAAe,CAAC,SAAS,CAAC,MAAM,CAAC;YAC5C;YAEA,WAAW;QACb;kCAAG,EAAE;IAEL,MAAM,WAAW,CAAC;QAChB,cAAc;QACd,aAAa,OAAO,CAAC,SAAS;QAE9B,0BAA0B;QAC1B,IAAI,aAAa,QAAQ;YACvB,SAAS,eAAe,CAAC,SAAS,CAAC,GAAG,CAAC;QACzC,OAAO;YACL,SAAS,eAAe,CAAC,SAAS,CAAC,MAAM,CAAC;QAC5C;IACF;IAEA,MAAM,cAAc;QAClB,SAAS,UAAU,SAAS,UAAU;IACxC;IAEA,MAAM,QAA0B;QAC9B;QACA;QACA;IACF;IAEA,yBAAyB;IACzB,qBACE,6LAAC,aAAa,QAAQ;QAAC,OAAO;kBAC3B,UAAU,yBACT,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;;;;;;;;;;;;;;;AAKzB;GAxDgB;KAAA;AA0DT,SAAS;;IACd,MAAM,UAAU,IAAA,2KAAU,EAAC;IAC3B,IAAI,YAAY,MAAM;QACpB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;IANgB"}},
    {"offset": {"line": 98, "column": 0}, "map": {"version":3,"sources":["file:///Users/auto/programming/gwt/gwt-his-project/his-web/src/components/providers/LayoutProvider.tsx"],"sourcesContent":["'use client';\n\nimport { createContext, useContext, useEffect, useState, ReactNode } from 'react';\nimport { LayoutMode } from '@/types';\n\ninterface LayoutContextType {\n  mode: LayoutMode;\n  setMode: (mode: LayoutMode) => void;\n  toggleMode: () => void;\n  sidebarCollapsed: boolean;\n  setSidebarCollapsed: (collapsed: boolean) => void;\n  toggleSidebar: () => void;\n  mobileMenuOpen: boolean;\n  setMobileMenuOpen: (open: boolean) => void;\n  openMobileMenu: () => void;\n  closeMobileMenu: () => void;\n  isMobile: boolean;\n}\n\nconst LayoutContext = createContext<LayoutContextType | null>(null);\n\ninterface LayoutProviderProps {\n  children: ReactNode;\n}\n\nexport function LayoutProvider({ children }: LayoutProviderProps) {\n  const [mode, setModeState] = useState<LayoutMode>('sidebar');\n  const [sidebarCollapsed, setSidebarCollapsedState] = useState(false);\n  const [mobileMenuOpen, setMobileMenuOpenState] = useState(false);\n  const [isMobile, setIsMobile] = useState(false);\n  const [mounted, setMounted] = useState(false);\n\n  useEffect(() => {\n    setMounted(true);\n    \n    // Check localStorage for saved preferences\n    const storedMode = localStorage.getItem('layoutMode') as LayoutMode | null;\n    const storedCollapsed = localStorage.getItem('sidebarCollapsed');\n    \n    if (storedMode) setModeState(storedMode);\n    if (storedCollapsed) setSidebarCollapsedState(storedCollapsed === 'true');\n\n    // Check if mobile\n    const checkMobile = () => {\n      setIsMobile(window.innerWidth < 1024);\n    };\n    \n    checkMobile();\n    window.addEventListener('resize', checkMobile);\n    \n    return () => window.removeEventListener('resize', checkMobile);\n  }, []);\n\n  const setMode = (newMode: LayoutMode) => {\n    setModeState(newMode);\n    localStorage.setItem('layoutMode', newMode);\n  };\n\n  const toggleMode = () => {\n    setMode(mode === 'sidebar' ? 'horizontal' : 'sidebar');\n  };\n\n  const setSidebarCollapsed = (collapsed: boolean) => {\n    setSidebarCollapsedState(collapsed);\n    localStorage.setItem('sidebarCollapsed', String(collapsed));\n  };\n\n  const toggleSidebar = () => {\n    setSidebarCollapsed(!sidebarCollapsed);\n  };\n\n  const openMobileMenu = () => {\n    setMobileMenuOpenState(true);\n    document.body.style.overflow = 'hidden';\n  };\n\n  const closeMobileMenu = () => {\n    setMobileMenuOpenState(false);\n    document.body.style.overflow = '';\n  };\n\n  const value: LayoutContextType = {\n    mode,\n    setMode,\n    toggleMode,\n    sidebarCollapsed,\n    setSidebarCollapsed,\n    toggleSidebar,\n    mobileMenuOpen,\n    setMobileMenuOpen: setMobileMenuOpenState,\n    openMobileMenu,\n    closeMobileMenu,\n    isMobile,\n  };\n\n  // Always provide context, but show loading state if not mounted\n  return (\n    <LayoutContext.Provider value={value}>\n      {mounted ? children : (\n        <div className=\"min-h-screen bg-slate-50 dark:bg-slate-950 flex items-center justify-center\">\n          <div className=\"w-8 h-8 border-4 border-primary-500 border-t-transparent rounded-full animate-spin\" />\n        </div>\n      )}\n    </LayoutContext.Provider>\n  );\n}\n\nexport function useLayout() {\n  const context = useContext(LayoutContext);\n  if (context === null) {\n    throw new Error('useLayout must be used within a LayoutProvider');\n  }\n  return context;\n}"],"names":[],"mappings":";;;;;;;AAEA;;;AAFA;;AAmBA,MAAM,8BAAgB,IAAA,8KAAa,EAA2B;AAMvD,SAAS,eAAe,EAAE,QAAQ,EAAuB;;IAC9D,MAAM,CAAC,MAAM,aAAa,GAAG,IAAA,yKAAQ,EAAa;IAClD,MAAM,CAAC,kBAAkB,yBAAyB,GAAG,IAAA,yKAAQ,EAAC;IAC9D,MAAM,CAAC,gBAAgB,uBAAuB,GAAG,IAAA,yKAAQ,EAAC;IAC1D,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IACzC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,IAAA,0KAAS;oCAAC;YACR,WAAW;YAEX,2CAA2C;YAC3C,MAAM,aAAa,aAAa,OAAO,CAAC;YACxC,MAAM,kBAAkB,aAAa,OAAO,CAAC;YAE7C,IAAI,YAAY,aAAa;YAC7B,IAAI,iBAAiB,yBAAyB,oBAAoB;YAElE,kBAAkB;YAClB,MAAM;wDAAc;oBAClB,YAAY,OAAO,UAAU,GAAG;gBAClC;;YAEA;YACA,OAAO,gBAAgB,CAAC,UAAU;YAElC;4CAAO,IAAM,OAAO,mBAAmB,CAAC,UAAU;;QACpD;mCAAG,EAAE;IAEL,MAAM,UAAU,CAAC;QACf,aAAa;QACb,aAAa,OAAO,CAAC,cAAc;IACrC;IAEA,MAAM,aAAa;QACjB,QAAQ,SAAS,YAAY,eAAe;IAC9C;IAEA,MAAM,sBAAsB,CAAC;QAC3B,yBAAyB;QACzB,aAAa,OAAO,CAAC,oBAAoB,OAAO;IAClD;IAEA,MAAM,gBAAgB;QACpB,oBAAoB,CAAC;IACvB;IAEA,MAAM,iBAAiB;QACrB,uBAAuB;QACvB,SAAS,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG;IACjC;IAEA,MAAM,kBAAkB;QACtB,uBAAuB;QACvB,SAAS,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG;IACjC;IAEA,MAAM,QAA2B;QAC/B;QACA;QACA;QACA;QACA;QACA;QACA;QACA,mBAAmB;QACnB;QACA;QACA;IACF;IAEA,gEAAgE;IAChE,qBACE,6LAAC,cAAc,QAAQ;QAAC,OAAO;kBAC5B,UAAU,yBACT,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;;;;;;;;;;;;;;;AAKzB;GAhFgB;KAAA;AAkFT,SAAS;;IACd,MAAM,UAAU,IAAA,2KAAU,EAAC;IAC3B,IAAI,YAAY,MAAM;QACpB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;IANgB"}},
    {"offset": {"line": 217, "column": 0}, "map": {"version":3,"sources":["file:///Users/auto/programming/gwt/gwt-his-project/his-web/src/lib/api.ts"],"sourcesContent":["import { ApiResponse, MenuItem, Role, RoleMenuAccess, Group, Permission } from '@/types';\nimport { \n  PatientListItem, \n  PatientDetail, \n  PatientFormData, \n  PatientSearchParams, \n  PatientListResponse, \n  PatientStats \n} from '@/types/patient.types';\n\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3333/api/v1';\n\ninterface RequestOptions {\n  method?: 'GET' | 'POST' | 'PUT' | 'DELETE' | 'PATCH';\n  body?: unknown;\n  headers?: Record<string, string>;\n  token?: string;\n}\n\ninterface ApiError {\n  message: string;\n  status: number;\n}\n\nclass ApiClient {\n  private baseUrl: string;\n  private authToken: string | null = null;\n\n  constructor(baseUrl: string) {\n    this.baseUrl = baseUrl;\n  }\n\n  setToken(token: string | null) {\n    this.authToken = token;\n  }\n\n  private getToken(): string | null {\n    if (this.authToken) {\n      return this.authToken;\n    }\n    if (typeof window !== 'undefined') {\n      const storedToken = localStorage.getItem('token');\n      if (storedToken) {\n        this.authToken = storedToken;\n        return storedToken;\n      }\n    }\n    return null;\n  }\n\n  clearToken() {\n    this.authToken = null;\n  }\n\n  async request<T>(endpoint: string, options: RequestOptions = {}): Promise<T> {\n    const { method = 'GET', body, headers = {}, token } = options;\n\n    const authToken = token || this.getToken();\n\n    const config: RequestInit = {\n      method,\n      headers: {\n        'Content-Type': 'application/json',\n        ...(authToken && { Authorization: `Bearer ${authToken}` }),\n        ...headers,\n      },\n    };\n\n    if (body) {\n      config.body = JSON.stringify(body);\n    }\n\n    try {\n      const response = await fetch(`${this.baseUrl}${endpoint}`, config);\n      const data = await response.json();\n\n      if (!response.ok) {\n        const error: ApiError = {\n          message: data.message || 'An error occurred',\n          status: response.status,\n        };\n\n        if (response.status === 401) {\n          this.clearToken();\n          if (typeof window !== 'undefined') {\n            localStorage.removeItem('token');\n            localStorage.removeItem('user');\n            if (!window.location.pathname.includes('/login')) {\n              window.location.href = '/login';\n            }\n          }\n        }\n\n        throw error;\n      }\n\n      return data as T;\n    } catch (error) {\n      if ((error as ApiError).status) {\n        throw error;\n      }\n      throw {\n        message: 'Network error. Please check your connection.',\n        status: 0,\n      } as ApiError;\n    }\n  }\n\n  get<T>(endpoint: string, options?: Omit<RequestOptions, 'method' | 'body'>) {\n    return this.request<T>(endpoint, { ...options, method: 'GET' });\n  }\n\n  post<T>(endpoint: string, body?: unknown, options?: Omit<RequestOptions, 'method' | 'body'>) {\n    return this.request<T>(endpoint, { ...options, method: 'POST', body });\n  }\n\n  put<T>(endpoint: string, body?: unknown, options?: Omit<RequestOptions, 'method' | 'body'>) {\n    return this.request<T>(endpoint, { ...options, method: 'PUT', body });\n  }\n\n  patch<T>(endpoint: string, body?: unknown, options?: Omit<RequestOptions, 'method' | 'body'>) {\n    return this.request<T>(endpoint, { ...options, method: 'PATCH', body });\n  }\n\n  delete<T>(endpoint: string, options?: Omit<RequestOptions, 'method' | 'body'>) {\n    return this.request<T>(endpoint, { ...options, method: 'DELETE' });\n  }\n}\n\nexport const api = new ApiClient(API_BASE_URL);\n\n// ============================================\n// Auth API\n// ============================================\nexport const authApi = {\n  login: (username: string, password: string) =>\n    api.post<{\n      success: boolean;\n      data: {\n        token: string;\n        expiresIn: number;\n        user: {\n          officerId: number;\n          username: string;\n          name: string;\n          role: string;\n          department: string | null;\n          permissions: string[];\n        };\n        loginInfo: {\n          clientIP: string;\n          serverIP: string;\n          serverMAC: string;\n          serverHostname: string;\n          loginTime: string;\n        };\n      };\n    }>('/auth/login', { username, password }),\n\n  logout: () => {\n    api.clearToken();\n    return api.post('/auth/logout');\n  },\n\n  refreshToken: () => api.post<{ token: string }>('/auth/refresh'),\n\n  me: () => api.get<{ success: boolean; data: { user: unknown } }>('/auth/me'),\n};\n\n// ============================================\n// Lookup Item Interface\n// ============================================\nexport interface LookupItem {\n  code: string;\n  name: string;\n}\n\nexport interface PnameLookup extends LookupItem {\n  ename?: string;\n  sex?: string;\n}\n\nexport interface PttypeLookup extends LookupItem {\n  is_active: boolean;\n  pcode?: string;\n  nhso_code?: string;\n}\n\nexport interface SubdistrictLookup extends LookupItem {\n  pocode?: string;\n  full_name?: string;\n}\n\nexport interface OvstistLookup extends LookupItem {\n  ovstist: string;\n  name: string;\n}\n\nexport interface AddressSearchResult {\n  code: string;\n  name: string;\n  full_name: string;\n  chwpart: string;\n  amppart: string;\n  tmbpart: string;\n  pocode: string;\n}\n\n// ============================================\n// Lookup API\n// ============================================\nexport const lookupApi = {\n  // คำนำหน้าชื่อ\n  getPnames: (sex?: 'M' | 'F') =>\n    api.get<{ success: boolean; data: PnameLookup[] }>(\n      `/lookups/pnames${sex ? `?sex=${sex}` : ''}`\n    ),\n\n  // อาชีพ\n  getOccupations: () =>\n    api.get<{ success: boolean; data: LookupItem[] }>('/lookups/occupations'),\n\n  // เชื้อชาติ/สัญชาติ\n  getNationalities: () =>\n    api.get<{ success: boolean; data: LookupItem[] }>('/lookups/nationalities'),\n\n  // ศาสนา\n  getReligions: () =>\n    api.get<{ success: boolean; data: LookupItem[] }>('/lookups/religions'),\n\n  // สถานะสมรส\n  getMarryStatuses: () =>\n    api.get<{ success: boolean; data: LookupItem[] }>('/lookups/marry-statuses'),\n\n  // การศึกษา\n  getEducations: () =>\n    api.get<{ success: boolean; data: LookupItem[] }>('/lookups/educations'),\n\n  // สิทธิการรักษา\n  getPttypes: (activeOnly = true) =>\n    api.get<{ success: boolean; data: PttypeLookup[] }>(\n      `/lookups/pttypes?active=${activeOnly}`\n    ),\n\n  // ความสัมพันธ์\n  getRelationTypes: () =>\n    api.get<{ success: boolean; data: LookupItem[] }>('/lookups/relation-types'),\n\n  // จังหวัด\n  getProvinces: () =>\n    api.get<{ success: boolean; data: LookupItem[] }>('/lookups/provinces'),\n\n  // อำเภอ\n  getDistricts: (chwpart: string) =>\n    api.get<{ success: boolean; data: LookupItem[] }>(\n      `/lookups/districts?chwpart=${chwpart}`\n    ),\n\n  // ตำบล\n  getSubdistricts: (chwpart: string, amppart: string) =>\n    api.get<{ success: boolean; data: SubdistrictLookup[] }>(\n      `/lookups/subdistricts?chwpart=${chwpart}&amppart=${amppart}`\n    ),\n\n  // ค้นหาที่อยู่\n  searchAddress: (q: string, limit = 20) =>\n    api.get<{ success: boolean; data: AddressSearchResult[] }>(\n      `/lookups/search-address?q=${encodeURIComponent(q)}&limit=${limit}`\n    ),\n\n   // ประเภทการมา\n   getOvstists: () =>\n    api.get<{ success: boolean; data: OvstistLookup[] }>('/lookups/ovstists'),\n\n};\n\n// ============================================\n// Patient API Response Types\n// ============================================\ninterface PatientApiListResponse {\n  success: boolean;\n  data: Array<{\n    hn: string;\n    cid: string | null;\n    full_name: string;\n    sex: 'M' | 'F' | null;\n    age: number | null;\n    birthday: string | null;\n    phone: string | null;\n    pttype: string | null;\n    pttype_name?: string;\n    bloodgrp: string | null;\n    has_allergy: boolean;\n    last_visit: string | null;\n    is_dead: boolean;\n  }>;\n  meta: {\n    total: number;\n    per_page: number;\n    current_page: number;\n    last_page: number;\n  };\n}\n\ninterface PatientApiDetailResponse {\n  success: boolean;\n  data: Record<string, unknown> & {\n    lookups?: {\n      pname_name?: string;\n      pttype_name?: string;\n      occupation_name?: string;\n      nationality_name?: string;\n      religion_name?: string;\n      education_name?: string;\n      marrystatus_name?: string;\n      chwpart_name?: string;\n      amppart_name?: string;\n      tmbpart_name?: string;\n    };\n  };\n}\n\ninterface PatientApiSearchResponse {\n  success: boolean;\n  data: Array<{\n    hn: string;\n    cid: string | null;\n    full_name: string;\n    sex: 'M' | 'F' | null;\n    age: number | null;\n    birthday: string | null;\n    pttype: string | null;\n    death?: string | null; \n  }>;\n}\n\ninterface PatientApiStatsResponse {\n  success: boolean;\n  data: PatientStats;\n}\n\n// ============================================\n// Transform Functions\n// ============================================\nconst transformPatientListItem = (item: PatientApiListResponse['data'][0]): PatientListItem => ({\n  hn: item.hn,\n  fullName: item.full_name,\n  cid: item.cid,\n  sex: item.sex,\n  age: item.age,\n  birthday: item.birthday,\n  phone: item.phone,\n  pttype: item.pttype,\n  pttypeName: item.pttype_name,\n  bloodgrp: item.bloodgrp,\n  hasAllergy: item.has_allergy,\n  lastVisit: item.last_visit,\n  isDead: item.is_dead,\n});\n\nconst transformPatientDetail = (data: PatientApiDetailResponse['data']): PatientDetail => {\n  const lookups = data.lookups || {};\n  \n  return {\n    hn: data.hn as string,\n    pname: data.pname as string | null,\n    fname: data.fname as string | null,\n    lname: data.lname as string | null,\n    midname: data.midname as string | null,\n    sex: data.sex as 'M' | 'F' | '1' | '2' | null,\n    birthday: data.birthday as string | null,\n    cid: data.cid as string | null,\n    mobilePhone: data.mobile_phone_number as string | null,\n    hometel: data.hometel as string | null,\n    email: data.email as string | null,\n    addrpart: data.addrpart as string | null,\n    moopart: data.moopart as string | null,\n    road: data.road as string | null,\n    tmbpart: data.tmbpart as string | null,\n    amppart: data.amppart as string | null,\n    chwpart: data.chwpart as string | null,\n    poCode: data.po_code as string | null,\n    bloodgrp: data.bloodgrp as string | null,\n    bloodgroupRh: data.bloodgroup_rh as string | null,\n    drugallergy: data.drugallergy as string | null,\n    g6pd: data.g6pd as 'Y' | 'N' | null,\n    pttype: data.pttype as string | null,\n    lastVisit: data.last_visit as string | null,\n    firstday: data.firstday as string | null,\n    death: data.death as 'Y' | 'N' | null,\n    deathday: data.deathday as string | null,\n    fathername: data.fathername as string | null,\n    mathername: data.mathername as string | null,\n    spsname: data.spsname as string | null,\n    marrystatus: data.marrystatus as string | null,\n    informname: data.informname as string | null,\n    informtel: data.informtel as string | null,\n    informrelation: data.informrelation as string | null,\n    nationality: data.nationality as string | null,\n    religion: data.religion as string | null,\n    occupation: data.occupation as string | null,\n    passportNo: data.passport_no as string | null,\n    lastUpdate: data.last_update as string | null,\n    // Computed fields\n    fullName: [data.pname, data.fname, data.lname].filter(Boolean).join(' '),\n    age: data.age as number | null,\n    ageText: data.age_text as string || '',\n    fullAddress: data.full_address as string || '',\n    // Joined data from lookups\n    pttypeName: lookups.pttype_name,\n    tmbName: lookups.tmbpart_name,\n    ampName: lookups.amppart_name,\n    chwName: lookups.chwpart_name,\n    nationalityName: lookups.nationality_name,\n    religionName: lookups.religion_name,\n    occupationName: lookups.occupation_name,\n    // Related data\n    allergies: data.drugallergy ? (data.drugallergy as string).split(',').map(s => s.trim()).filter(Boolean) : [],\n    photo: data.photo as string | null,\n    isDead: data.death === 'Y',\n  };\n};\n\n// ============================================\n// Patient API\n// ============================================\nexport const patientApi = {\n  // Get patient list with pagination\n  getList: async (params: {\n    page?: number;\n    limit?: number;\n    search?: string;\n    pttype?: string;\n    chwpart?: string;\n    amppart?: string;\n    isActive?: boolean;\n  } = {}): Promise<PatientListResponse> => {\n    const queryParams = new URLSearchParams();\n    if (params.page) queryParams.append('page', String(params.page));\n    if (params.limit) queryParams.append('limit', String(params.limit));\n    if (params.search) queryParams.append('search', params.search);\n    if (params.pttype) queryParams.append('pttype', params.pttype);\n    if (params.chwpart) queryParams.append('chwpart', params.chwpart);\n    if (params.amppart) queryParams.append('amppart', params.amppart);\n    if (params.isActive !== undefined) queryParams.append('is_active', String(params.isActive));\n\n    const response = await api.get<PatientApiListResponse>(\n      `/patients?${queryParams.toString()}`\n    );\n\n    return {\n      data: response.data.map(transformPatientListItem),\n      pagination: {\n        page: response.meta.current_page,\n        limit: response.meta.per_page,\n        total: response.meta.total,\n        totalPages: response.meta.last_page,\n      },\n    };\n  },\n\n  // Get patient detail by HN\n  getByHn: async (hn: string): Promise<{ success: boolean; data: PatientDetail }> => {\n    const response = await api.get<PatientApiDetailResponse>(`/patients/${hn}`);\n    return {\n      success: response.success,\n      data: transformPatientDetail(response.data),\n    };\n  },\n  // Get patient detail by CID\n  getByCid: async (cid: string): Promise<{ success: boolean; data: PatientDetail }> => {\n    const response = await api.get<PatientApiDetailResponse>(`/patients/cid/${cid}`);\n    return {\n      success: response.success,\n      data: transformPatientDetail(response.data),\n    };\n  },\n\n  // Quick search patients\n  search: async (q: string, limit = 10): Promise<PatientListItem[]> => {\n    if (!q || q.length < 2) return [];\n    \n    const response = await api.get<PatientApiSearchResponse>(\n      `/patients/search?q=${encodeURIComponent(q)}&limit=${limit}`\n    );\n\n    return response.data.map((item) => ({\n      hn: item.hn,\n      fullName: item.full_name,\n      cid: item.cid,\n      sex: item.sex,\n      age: item.age,\n      birthday: item.birthday,\n      phone: null,\n      pttype: item.pttype,\n      bloodgrp: null,\n      hasAllergy: false,\n      lastVisit: null,\n      isDead: item.death === 'Y',\n    }));\n  },\n\n  // Create new patient\n  create: async (data: PatientFormData): Promise<ApiResponse<{ hn: string }>> => {\n    return api.post<ApiResponse<{ hn: string }>>('/patients', {\n      pname: data.pname,\n      fname: data.fname,\n      lname: data.lname,\n      sex: data.sex,\n      birthday: data.birthday,\n      cid: data.cid,\n      mobile_phone_number: data.mobilePhone,\n      hometel: data.hometel,\n      email: data.email,\n      addrpart: data.addrpart,\n      moopart: data.moopart,\n      road: data.road,\n      tmbpart: data.tmbpart,\n      amppart: data.amppart,\n      chwpart: data.chwpart,\n      po_code: data.poCode,\n      bloodgrp: data.bloodgrp,\n      bloodgroup_rh: data.bloodgroupRh,\n      drugallergy: data.drugallergy,\n      g6pd: data.g6pd,\n      pttype: data.pttype,\n      nationality: data.nationality,\n      religion: data.religion,\n      occupation: data.occupation,\n      marrystatus: data.marrystatus,\n      fathername: data.fathername,\n      mathername: data.mathername,\n      spsname: data.spsname,\n      informname: data.informname,\n      informtel: data.informtel,\n      informrelation: data.informrelation,\n    });\n  },\n\n  // Update patient\n  update: async (hn: string, data: Partial<PatientFormData>): Promise<ApiResponse<void>> => {\n    const payload: Record<string, unknown> = {};\n    \n    if (data.pname !== undefined) payload.pname = data.pname;\n    if (data.fname !== undefined) payload.fname = data.fname;\n    if (data.lname !== undefined) payload.lname = data.lname;\n    if (data.sex !== undefined) payload.sex = data.sex;\n    if (data.birthday !== undefined) payload.birthday = data.birthday;\n    if (data.cid !== undefined) payload.cid = data.cid;\n    if (data.mobilePhone !== undefined) payload.mobile_phone_number = data.mobilePhone;\n    if (data.hometel !== undefined) payload.hometel = data.hometel;\n    if (data.email !== undefined) payload.email = data.email;\n    if (data.addrpart !== undefined) payload.addrpart = data.addrpart;\n    if (data.moopart !== undefined) payload.moopart = data.moopart;\n    if (data.road !== undefined) payload.road = data.road;\n    if (data.tmbpart !== undefined) payload.tmbpart = data.tmbpart;\n    if (data.amppart !== undefined) payload.amppart = data.amppart;\n    if (data.chwpart !== undefined) payload.chwpart = data.chwpart;\n    if (data.poCode !== undefined) payload.po_code = data.poCode;\n    if (data.bloodgrp !== undefined) payload.bloodgrp = data.bloodgrp;\n    if (data.bloodgroupRh !== undefined) payload.bloodgroup_rh = data.bloodgroupRh;\n    if (data.drugallergy !== undefined) payload.drugallergy = data.drugallergy;\n    if (data.g6pd !== undefined) payload.g6pd = data.g6pd;\n    if (data.pttype !== undefined) payload.pttype = data.pttype;\n    if (data.nationality !== undefined) payload.nationality = data.nationality;\n    if (data.religion !== undefined) payload.religion = data.religion;\n    if (data.occupation !== undefined) payload.occupation = data.occupation;\n    if (data.marrystatus !== undefined) payload.marrystatus = data.marrystatus;\n    if (data.fathername !== undefined) payload.fathername = data.fathername;\n    if (data.mathername !== undefined) payload.mathername = data.mathername;\n    if (data.spsname !== undefined) payload.spsname = data.spsname;\n    if (data.informname !== undefined) payload.informname = data.informname;\n    if (data.informtel !== undefined) payload.informtel = data.informtel;\n    if (data.informrelation !== undefined) payload.informrelation = data.informrelation;\n\n    return api.put<ApiResponse<void>>(`/patients/${hn}`, payload);\n  },\n\n  // Delete patient\n  delete: async (hn: string): Promise<ApiResponse<void>> => {\n    return api.delete<ApiResponse<void>>(`/patients/${hn}`);\n  },\n\n  // Get patient statistics\n  getStats: async (): Promise<PatientStats> => {\n    const response = await api.get<PatientApiStatsResponse>('/patients/stats');\n    return response.data;\n  },\n};\n\n// ============================================\n// Patient Image Types\n// ============================================\ninterface PatientImageItem {\n  hn: string;\n  imageName: string;\n  width: number | null;\n  height: number | null;\n  captureDate: string | null;\n}\n\ninterface PatientImageDetail extends PatientImageItem {\n  image: string; // Base64 encoded\n}\n\ninterface PatientImagesResponse {\n  success: boolean;\n  data: Array<{\n    hn: string;\n    image_name: string;\n    width: number | null;\n    height: number | null;\n    capture_date: string | null;\n  }>;\n}\n\ninterface PatientImageApiResponse {\n  success: boolean;\n  data: {\n    hn: string;\n    image_name: string;\n    image: string;\n    width: number | null;\n    height: number | null;\n    capture_date: string | null;\n  };\n}\n\n// ============================================\n// Patient Image API\n// ============================================\nexport const patientImageApi = {\n  // Get all images for a patient\n  getByHn: async (hn: string): Promise<PatientImageItem[]> => {\n    const response = await api.get<PatientImagesResponse>(`/patients/${hn}/images`);\n    return response.data.map(item => ({\n      hn: item.hn,\n      imageName: item.image_name,\n      width: item.width,\n      height: item.height,\n      captureDate: item.capture_date,\n    }));\n  },\n\n  // Get profile image (primary image)\n  getProfileImage: async (hn: string): Promise<PatientImageDetail | null> => {\n    try {\n      const response = await api.get<PatientImageApiResponse>(`/patients/${hn}/image`);\n      return {\n        hn: response.data.hn,\n        imageName: response.data.image_name,\n        image: response.data.image,\n        width: response.data.width,\n        height: response.data.height,\n        captureDate: response.data.capture_date,\n      };\n    } catch {\n      return null;\n    }\n  },\n\n  // Get raw image URL for img src\n  getProfileImageUrl: (hn: string): string => {\n    const baseUrl = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3333/api/v1';\n    return `${baseUrl}/patients/${hn}/image/raw`;\n  },\n\n  // Upload profile image\n  upload: async (\n    hn: string,\n    imageData: string,\n    width?: number,\n    height?: number\n  ): Promise<{ success: boolean; message: string }> => {\n    const response = await api.post<{ success: boolean; message: string }>(`/patients/${hn}/image`, {\n      image: imageData,\n      width,\n      height,\n    });\n    return response;\n  },\n\n  // Delete profile image\n  delete: async (hn: string): Promise<void> => {\n    await api.delete(`/patients/${hn}/image`);\n  },\n};\n\n// ============================================\n// Helper: Transform menu from API response (camelCase) to snake_case\n// ============================================\nconst transformMenuFromApi = (menu: Record<string, unknown>): MenuItem => ({\n  id: menu.id as number,\n  menu_code: (menu.menuCode || menu.menu_code) as string,\n  menu_name: (menu.menuName || menu.menu_name) as string,\n  menu_name_th: (menu.menuNameTh || menu.menu_name_th) as string | null,\n  parent_id: (menu.parentId ?? menu.parent_id ?? null) as number | null,\n  icon: (menu.icon || null) as string | null,\n  route_path: (menu.routePath || menu.route_path) as string | null,\n  sort_order: (menu.sortOrder ?? menu.sort_order ?? 0) as number,\n  is_active: Boolean(menu.isActive ?? menu.is_active),\n});\n\n// ============================================\n// Menu API\n// ============================================\nexport const menuApi = {\n  // =========================================\n  // Public Menu Operations\n  // =========================================\n\n  // Get all menus (with transform from camelCase to snake_case)\n  getAll: async (): Promise<ApiResponse<MenuItem[]>> => {\n    const response = await api.get<ApiResponse<Record<string, unknown>[]>>('/settings/menus');\n    return {\n      ...response,\n      data: response.data.map(transformMenuFromApi),\n    };\n  },\n\n  // Get active menus only\n  getActive: async (): Promise<ApiResponse<MenuItem[]>> => {\n    const response = await api.get<ApiResponse<Record<string, unknown>[]>>('/settings/menus/active');\n    return {\n      ...response,\n      data: response.data.map(transformMenuFromApi),\n    };\n  },\n\n  // Get menu tree (active only)\n  getTree: async (): Promise<ApiResponse<MenuItem[]>> => {\n    const response = await api.get<ApiResponse<Record<string, unknown>[]>>('/settings/menus/tree');\n    return {\n      ...response,\n      data: response.data.map(transformMenuFromApi),\n    };\n  },\n\n  // Get full menu tree (including inactive)\n  getFullTree: async (): Promise<ApiResponse<MenuItem[]>> => {\n    const response = await api.get<ApiResponse<Record<string, unknown>[]>>('/settings/menus/tree/full');\n    return {\n      ...response,\n      data: response.data.map(transformMenuFromApi),\n    };\n  },\n\n  // Get menu by ID\n  getById: async (id: number): Promise<ApiResponse<MenuItem>> => {\n    const response = await api.get<ApiResponse<Record<string, unknown>>>(`/settings/menus/${id}`);\n    return {\n      ...response,\n      data: transformMenuFromApi(response.data),\n    };\n  },\n\n  // Get menu by code\n  getByCode: async (code: string): Promise<ApiResponse<MenuItem>> => {\n    const response = await api.get<ApiResponse<Record<string, unknown>>>(`/settings/menus/code/${code}`);\n    return {\n      ...response,\n      data: transformMenuFromApi(response.data),\n    };\n  },\n\n  // Get menus by parent ID (use null for root)\n  getByParentId: async (parentId: number | null): Promise<ApiResponse<MenuItem[]>> => {\n    const response = await api.get<ApiResponse<Record<string, unknown>[]>>(\n      `/settings/menus/parent/${parentId === null ? 'null' : parentId}`\n    );\n    return {\n      ...response,\n      data: response.data.map(transformMenuFromApi),\n    };\n  },\n\n  // =========================================\n  // CRUD Operations\n  // =========================================\n\n  // Create menu\n  create: (data: {\n    menu_code: string;\n    menu_name: string;\n    menu_name_th?: string;\n    parent_id?: number | null;\n    icon?: string;\n    route_path?: string;\n    sort_order?: number;\n    is_active?: number;\n  }) => api.post<ApiResponse<MenuItem>>('/settings/menus', data),\n\n  // Update menu\n  update: (id: number, data: Partial<MenuItem>) =>\n    api.put<ApiResponse<MenuItem>>(`/settings/menus/${id}`, data),\n\n  // Delete menu\n  delete: (id: number) => api.delete<ApiResponse<void>>(`/settings/menus/${id}`),\n\n  // =========================================\n  // Bulk Operations\n  // =========================================\n\n  // Reorder menus\n  reorder: (items: { id: number; sort_order: number }[]) =>\n    api.post<ApiResponse<void>>('/settings/menus/reorder', { items }),\n\n  // Move menu to new parent\n  move: (id: number, parentId: number | null) =>\n    api.put<ApiResponse<MenuItem>>(`/settings/menus/${id}/move`, { parent_id: parentId }),\n\n  // =========================================\n  // User Menu Access (by user ID)\n  // =========================================\n\n  // Get user menu access\n  getUserAccess: (userId: number) =>\n    api.get<ApiResponse<MenuItem[]>>(`/settings/menus/user/${userId}/access`),\n\n  // Get user menu tree\n  getUserTree: (userId: number) =>\n    api.get<ApiResponse<MenuItem[]>>(`/settings/menus/user/${userId}/tree`),\n\n  // Check user menu access\n  checkUserAccess: (userId: number, menuCode: string) =>\n    api.get<ApiResponse<{\n      has_access: boolean;\n      can_view: boolean;\n      can_create: boolean;\n      can_edit: boolean;\n      can_delete: boolean;\n      can_export: boolean;\n      can_print: boolean;\n    }>>(`/settings/menus/user/${userId}/check/${menuCode}`),\n\n  // =========================================\n  // Current User Menu Access (my)\n  // =========================================\n\n  // Get my menu access (current logged in user)\n  getMyAccess: () => api.get<ApiResponse<MenuItem[]>>('/settings/menus/my/access'),\n\n  // Get my menu tree (current logged in user)\n  getMyTree: () => api.get<ApiResponse<MenuItem[]>>('/settings/menus/my/tree'),\n\n  // Check my menu access (current logged in user)\n  checkMyAccess: (menuCode: string) =>\n    api.get<ApiResponse<{\n      has_access: boolean;\n      can_view: boolean;\n      can_create: boolean;\n      can_edit: boolean;\n      can_delete: boolean;\n      can_export: boolean;\n      can_print: boolean;\n    }>>(`/settings/menus/my/check/${menuCode}`),\n\n  // =========================================\n  // Alias for backward compatibility\n  // =========================================\n  getUserMenus: () => api.get<ApiResponse<MenuItem[]>>('/settings/menus/my/tree'),\n};\n\n// ============================================\n// Role API (Legacy - use settingsApi.roles instead)\n// ============================================\nexport const roleApi = {\n  // Get all roles\n  getAll: () => api.get<ApiResponse<Role[]>>('/roles'),\n\n  // Get role by ID\n  getById: (id: number) => api.get<ApiResponse<Role>>(`/roles/${id}`),\n\n  // Create role\n  create: (data: Partial<Role>) => api.post<ApiResponse<Role>>('/roles', data),\n\n  // Update role\n  update: (id: number, data: Partial<Role>) =>\n    api.put<ApiResponse<Role>>(`/roles/${id}`, data),\n\n  // Delete role\n  delete: (id: number) => api.delete<ApiResponse<void>>(`/roles/${id}`),\n\n  // Get role menu access\n  getMenuAccess: (roleId: number) =>\n    api.get<ApiResponse<RoleMenuAccess[]>>(`/roles/${roleId}/menus`),\n\n  // Update role menu access\n  updateMenuAccess: (roleId: number, menuAccess: RoleMenuAccess[]) =>\n    api.put<ApiResponse<void>>(`/roles/${roleId}/menus`, { menuAccess }),\n};\n\n// ============================================\n// Group API (Legacy - use settingsApi.groups instead)\n// ============================================\nexport const groupApi = {\n  // Get all groups\n  getAll: () => api.get<ApiResponse<Group[]>>('/groups'),\n\n  // Get group by ID\n  getById: (id: number) => api.get<ApiResponse<Group>>(`/groups/${id}`),\n\n  // Create group\n  create: (data: Partial<Group>) => api.post<ApiResponse<Group>>('/groups', data),\n\n  // Update group\n  update: (id: number, data: Partial<Group>) =>\n    api.put<ApiResponse<Group>>(`/groups/${id}`, data),\n\n  // Delete group\n  delete: (id: number) => api.delete<ApiResponse<void>>(`/groups/${id}`),\n\n  // Get group roles\n  getRoles: (groupId: number) => api.get<ApiResponse<Role[]>>(`/groups/${groupId}/roles`),\n\n  // Assign roles to group\n  assignRoles: (groupId: number, roleIds: number[]) =>\n    api.put<ApiResponse<void>>(`/groups/${groupId}/roles`, { roleIds }),\n};\n\n// ============================================\n// Permission API (Legacy - use settingsApi.permissions instead)\n// ============================================\nexport const permissionApi = {\n  // Get all permissions\n  getAll: () => api.get<ApiResponse<Permission[]>>('/permissions'),\n\n  // Get permission by ID\n  getById: (id: number) => api.get<ApiResponse<Permission>>(`/permissions/${id}`),\n\n  // Create permission\n  create: (data: Partial<Permission>) =>\n    api.post<ApiResponse<Permission>>('/permissions', data),\n\n  // Update permission\n  update: (id: number, data: Partial<Permission>) =>\n    api.put<ApiResponse<Permission>>(`/permissions/${id}`, data),\n\n  // Delete permission\n  delete: (id: number) => api.delete<ApiResponse<void>>(`/permissions/${id}`),\n};\n\n// ============================================\n// User API\n// ============================================\nexport const userApi = {\n  // Get all users\n  getAll: (params?: { page?: number; limit?: number; search?: string }) => {\n    const query = new URLSearchParams();\n    if (params?.page) query.set('page', String(params.page));\n    if (params?.limit) query.set('limit', String(params.limit));\n    if (params?.search) query.set('search', params.search);\n    const queryString = query.toString();\n    return api.get<ApiResponse<unknown[]>>(`/users${queryString ? `?${queryString}` : ''}`);\n  },\n\n  // Get user by ID\n  getById: (id: number) => api.get<ApiResponse<unknown>>(`/users/${id}`),\n\n  // Create user\n  create: (data: unknown) => api.post<ApiResponse<unknown>>('/users', data),\n\n  // Update user\n  update: (id: number, data: unknown) => api.put<ApiResponse<unknown>>(`/users/${id}`, data),\n\n  // Delete user\n  delete: (id: number) => api.delete<ApiResponse<void>>(`/users/${id}`),\n\n  // Get user roles\n  getRoles: (userId: number) => api.get<ApiResponse<Role[]>>(`/users/${userId}/roles`),\n\n  // Assign roles to user\n  assignRoles: (userId: number, roleIds: number[]) =>\n    api.put<ApiResponse<void>>(`/users/${userId}/roles`, { roleIds }),\n\n  // Get user groups\n  getGroups: (userId: number) => api.get<ApiResponse<Group[]>>(`/users/${userId}/groups`),\n\n  // Assign groups to user\n  assignGroups: (userId: number, groupIds: number[]) =>\n    api.put<ApiResponse<void>>(`/users/${userId}/groups`, { groupIds }),\n};\n\n// ============================================\n// Settings API (New - matches backend routes)\n// ============================================\nexport const settingsApi = {\n  // =========================================\n  // Roles\n  // =========================================\n  roles: {\n    getAll: () => api.get<ApiResponse<Role[]>>('/settings/roles'),\n    \n    getActive: () => api.get<ApiResponse<Role[]>>('/settings/roles/active'),\n    \n    getById: (id: number) => api.get<ApiResponse<Role>>(`/settings/roles/${id}`),\n    \n    getWithDetails: (id: number) => api.get<ApiResponse<Role>>(`/settings/roles/${id}/details`),\n    \n    getMenuAccess: (id: number) => api.get<ApiResponse<RoleMenuAccess[]>>(`/settings/roles/${id}/menus`),\n    \n    getPermissions: (id: number) => api.get<ApiResponse<Permission[]>>(`/settings/roles/${id}/permissions`),\n    \n    create: (data: {\n      role_code: string;\n      role_name: string;\n      description?: string;\n      is_active?: number;\n    }) => api.post<ApiResponse<Role>>('/settings/roles', data),\n    \n    update: (id: number, data: {\n      role_code?: string;\n      role_name?: string;\n      description?: string;\n      is_active?: number;\n    }) => api.put<ApiResponse<Role>>(`/settings/roles/${id}`, data),\n    \n    delete: (id: number) => api.delete<ApiResponse<void>>(`/settings/roles/${id}`),\n    \n    setMenuAccess: (roleId: number, menuId: number, access: {\n      can_view?: number;\n      can_create?: number;\n      can_edit?: number;\n      can_delete?: number;\n      can_export?: number;\n      can_print?: number;\n    }) => api.post<ApiResponse<void>>(`/settings/roles/${roleId}/menus/${menuId}`, access),\n    \n    removeMenuAccess: (roleId: number, menuId: number) => \n      api.delete<ApiResponse<void>>(`/settings/roles/${roleId}/menus/${menuId}`),\n    \n    addPermission: (roleId: number, permissionId: number) => \n      api.post<ApiResponse<void>>(`/settings/roles/${roleId}/permissions/${permissionId}`),\n    \n    removePermission: (roleId: number, permissionId: number) => \n      api.delete<ApiResponse<void>>(`/settings/roles/${roleId}/permissions/${permissionId}`),\n  },\n\n  // =========================================\n  // Groups\n  // =========================================\n  groups: {\n    getAll: () => api.get<ApiResponse<Group[]>>('/settings/groups'),\n    \n    getActive: () => api.get<ApiResponse<Group[]>>('/settings/groups/active'),\n    \n    getTree: () => api.get<ApiResponse<Group[]>>('/settings/groups/tree'),\n    \n    getById: (id: number) => api.get<ApiResponse<Group>>(`/settings/groups/${id}`),\n    \n    getWithRoles: (id: number) => api.get<ApiResponse<Group>>(`/settings/groups/${id}/roles`),\n    \n    create: (data: {\n      group_code: string;\n      group_name: string;\n      description?: string;\n      parent_id?: number;\n      is_active?: number;\n    }) => api.post<ApiResponse<Group>>('/settings/groups', data),\n    \n    update: (id: number, data: {\n      group_code?: string;\n      group_name?: string;\n      description?: string;\n      parent_id?: number | null;\n      is_active?: number;\n    }) => api.put<ApiResponse<Group>>(`/settings/groups/${id}`, data),\n    \n    delete: (id: number) => api.delete<ApiResponse<void>>(`/settings/groups/${id}`),\n    \n    addRole: (groupId: number, roleId: number) => \n      api.post<ApiResponse<void>>(`/settings/groups/${groupId}/roles/${roleId}`),\n    \n    removeRole: (groupId: number, roleId: number) => \n      api.delete<ApiResponse<void>>(`/settings/groups/${groupId}/roles/${roleId}`),\n  },\n\n  // =========================================\n  // Menu Items (use menuApi for full functionality)\n  // =========================================\n  menus: {\n    // Basic CRUD - for full menu operations, use menuApi instead\n    getAll: () => menuApi.getAll(),\n    getTree: () => menuApi.getTree(),\n    getById: (id: number) => menuApi.getById(id),\n    create: (data: {\n      menu_code: string;\n      menu_name: string;\n      menu_name_th?: string;\n      parent_id?: number;\n      icon?: string;\n      route_path?: string;\n      sort_order?: number;\n      is_active?: number;\n    }) => menuApi.create(data),\n    update: (id: number, data: Partial<MenuItem>) => menuApi.update(id, data),\n    delete: (id: number) => menuApi.delete(id),\n  },\n\n  // =========================================\n  // Permissions\n  // =========================================\n  permissions: {\n    getAll: () => api.get<ApiResponse<Permission[]>>('/settings/permissions'),\n    \n    getById: (id: number) => api.get<ApiResponse<Permission>>(`/settings/permissions/${id}`),\n    \n    create: (data: {\n      permission_code: string;\n      permission_name: string;\n      description?: string;\n    }) => api.post<ApiResponse<Permission>>('/settings/permissions', data),\n    \n    update: (id: number, data: {\n      permission_code?: string;\n      permission_name?: string;\n      description?: string;\n    }) => api.put<ApiResponse<Permission>>(`/settings/permissions/${id}`, data),\n    \n    delete: (id: number) => api.delete<ApiResponse<void>>(`/settings/permissions/${id}`),\n  },\n\n  // =========================================\n  // User Settings\n  // =========================================\n  users: {\n    getGroups: (userId: number) => api.get<ApiResponse<Group[]>>(`/settings/users/${userId}/groups`),\n    \n    getRoles: (userId: number) => api.get<ApiResponse<Role[]>>(`/settings/users/${userId}/roles`),\n    \n    getEffectiveRoles: (userId: number) => api.get<ApiResponse<Role[]>>(`/settings/users/${userId}/effective-roles`),\n    \n    getMenuAccess: (userId: number) => api.get<ApiResponse<MenuItem[]>>(`/settings/users/${userId}/menu-access`),\n    \n    getPermissions: (userId: number) => api.get<ApiResponse<Permission[]>>(`/settings/users/${userId}/permissions`),\n    \n    checkMenuAccess: (userId: number, menuCode: string) => \n      api.get<ApiResponse<RoleMenuAccess>>(`/settings/users/${userId}/check-menu/${menuCode}`),\n    \n    checkPermission: (userId: number, permissionCode: string) => \n      api.get<ApiResponse<{ permission_code: string; has_permission: boolean }>>(`/settings/users/${userId}/check-permission/${permissionCode}`),\n    \n    addGroup: (userId: number, groupId: number, isPrimary?: number) => \n      api.post<ApiResponse<void>>(`/settings/users/${userId}/groups/${groupId}`, { is_primary: isPrimary }),\n    \n    removeGroup: (userId: number, groupId: number) => \n      api.delete<ApiResponse<void>>(`/settings/users/${userId}/groups/${groupId}`),\n    \n    setPrimaryGroup: (userId: number, groupId: number) => \n      api.put<ApiResponse<void>>(`/settings/users/${userId}/groups/${groupId}/primary`),\n    \n    addRole: (userId: number, roleId: number) => \n      api.post<ApiResponse<void>>(`/settings/users/${userId}/roles/${roleId}`),\n    \n    removeRole: (userId: number, roleId: number) => \n      api.delete<ApiResponse<void>>(`/settings/users/${userId}/roles/${roleId}`),\n  },\n\n  // =========================================\n  // Current User Access (my)\n  // =========================================\n  my: {\n    getEffectiveRoles: () => api.get<ApiResponse<Role[]>>('/settings/my/effective-roles'),\n    \n    getMenuAccess: () => api.get<ApiResponse<MenuItem[]>>('/settings/my/menu-access'),\n    \n    getPermissions: () => api.get<ApiResponse<Permission[]>>('/settings/my/permissions'),\n    \n    checkMenuAccess: (menuCode: string) => \n      api.get<ApiResponse<RoleMenuAccess>>(`/settings/my/check-menu/${menuCode}`),\n    \n    checkPermission: (permissionCode: string) => \n      api.get<ApiResponse<{ permission_code: string; has_permission: boolean }>>(`/settings/my/check-permission/${permissionCode}`),\n  },\n};\n\nexport default api;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 951, "column": 0}, "map": {"version":3,"sources":["file:///Users/auto/programming/gwt/gwt-his-project/his-web/src/components/providers/AuthProvider.tsx"],"sourcesContent":["'use client';\n\nimport { createContext, useContext, useEffect, useState, ReactNode } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { User } from '@/types';\nimport { authApi, api } from '@/lib/api';\n\ninterface AuthContextType {\n  user: User | null;\n  token: string | null;\n  isAuthenticated: boolean;\n  isLoading: boolean;\n  login: (username: string, password: string) => Promise<void>;\n  logout: () => void;\n}\n\nconst AuthContext = createContext<AuthContextType | null>(null);\n\ninterface AuthProviderProps {\n  children: ReactNode;\n}\n\nexport function AuthProvider({ children }: AuthProviderProps) {\n  const [user, setUser] = useState<User | null>(null);\n  const [token, setToken] = useState<string | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const router = useRouter();\n\n  useEffect(() => {\n    // Check for existing session\n    const storedToken = localStorage.getItem('token');\n    const storedUser = localStorage.getItem('user');\n\n    if (storedToken && storedUser) {\n      setToken(storedToken);\n      setUser(JSON.parse(storedUser));\n      // Sync token with API client\n      api.setToken(storedToken);\n    }\n    setIsLoading(false);\n  }, []);\n\n  const login = async (username: string, password: string) => {\n    setIsLoading(true);\n    try {\n      const response = await authApi.login(username, password);\n\n      if (response.success) {\n        const { token: newToken, user: userData } = response.data;\n\n        // Set token in API client first\n        api.setToken(newToken);\n\n        setToken(newToken);\n        setUser(userData);\n        localStorage.setItem('token', newToken);\n        localStorage.setItem('user', JSON.stringify(userData));\n        router.push('/');\n      } else {\n        throw new Error('Login failed');\n      }\n    } catch (error: unknown) {\n      const err = error as { message?: string };\n      throw new Error(err.message || 'Login failed');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const logout = () => {\n    // Clear token from API client\n    api.clearToken();\n\n    setToken(null);\n    setUser(null);\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    router.push('/login');\n  };\n\n  const value: AuthContextType = {\n    user,\n    token,\n    isAuthenticated: !!token,\n    isLoading,\n    login,\n    logout,\n  };\n\n  return (\n    <AuthContext.Provider value={value}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (context === null) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n}"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAEA;;;AALA;;;;AAgBA,MAAM,4BAAc,IAAA,8KAAa,EAAyB;AAMnD,SAAS,aAAa,EAAE,QAAQ,EAAqB;;IAC1D,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAc;IAC9C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAgB;IAClD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,SAAS,IAAA,kJAAS;IAExB,IAAA,0KAAS;kCAAC;YACR,6BAA6B;YAC7B,MAAM,cAAc,aAAa,OAAO,CAAC;YACzC,MAAM,aAAa,aAAa,OAAO,CAAC;YAExC,IAAI,eAAe,YAAY;gBAC7B,SAAS;gBACT,QAAQ,KAAK,KAAK,CAAC;gBACnB,6BAA6B;gBAC7B,2HAAG,CAAC,QAAQ,CAAC;YACf;YACA,aAAa;QACf;iCAAG,EAAE;IAEL,MAAM,QAAQ,OAAO,UAAkB;QACrC,aAAa;QACb,IAAI;YACF,MAAM,WAAW,MAAM,+HAAO,CAAC,KAAK,CAAC,UAAU;YAE/C,IAAI,SAAS,OAAO,EAAE;gBACpB,MAAM,EAAE,OAAO,QAAQ,EAAE,MAAM,QAAQ,EAAE,GAAG,SAAS,IAAI;gBAEzD,gCAAgC;gBAChC,2HAAG,CAAC,QAAQ,CAAC;gBAEb,SAAS;gBACT,QAAQ;gBACR,aAAa,OAAO,CAAC,SAAS;gBAC9B,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC;gBAC5C,OAAO,IAAI,CAAC;YACd,OAAO;gBACL,MAAM,IAAI,MAAM;YAClB;QACF,EAAE,OAAO,OAAgB;YACvB,MAAM,MAAM;YACZ,MAAM,IAAI,MAAM,IAAI,OAAO,IAAI;QACjC,SAAU;YACR,aAAa;QACf;IACF;IAEA,MAAM,SAAS;QACb,8BAA8B;QAC9B,2HAAG,CAAC,UAAU;QAEd,SAAS;QACT,QAAQ;QACR,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,OAAO,IAAI,CAAC;IACd;IAEA,MAAM,QAAyB;QAC7B;QACA;QACA,iBAAiB,CAAC,CAAC;QACnB;QACA;QACA;IACF;IAEA,qBACE,6LAAC,YAAY,QAAQ;QAAC,OAAO;kBAC1B;;;;;;AAGP;GAxEgB;;QAIC,kJAAS;;;KAJV;AA0ET,SAAS;;IACd,MAAM,UAAU,IAAA,2KAAU,EAAC;IAC3B,IAAI,YAAY,MAAM;QACpB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;IANgB"}},
    {"offset": {"line": 1061, "column": 0}, "map": {"version":3,"sources":["file:///Users/auto/programming/gwt/gwt-his-project/his-web/src/components/providers/MenuProvider.tsx"],"sourcesContent":["'use client';\n\nimport { createContext, useContext, useState, useEffect, useCallback, ReactNode } from 'react';\nimport { MenuItem } from '@/types';\nimport { menuApi } from '@/lib/api';\nimport { useAuth } from './AuthProvider';\n\n// API response type (camelCase from backend)\ninterface ApiMenuItem {\n  menuId: number;\n  menuCode: string;\n  menuName: string;\n  menuNameTh: string | null;\n  parentId: number | null;\n  icon: string | null;\n  routePath: string | null;\n  sortOrder: number;\n  isActive?: boolean;\n  canView?: number;\n  canCreate?: number;\n  canEdit?: number;\n  canDelete?: number;\n  canExport?: number;\n  canPrint?: number;\n  children?: ApiMenuItem[];\n}\n\n// Convert API response (camelCase) to frontend format (snake_case)\nconst convertApiMenuItem = (item: ApiMenuItem): MenuItem => ({\n  id: item.menuId,\n  menu_code: item.menuCode,\n  menu_name: item.menuName,\n  menu_name_th: item.menuNameTh,\n  parent_id: item.parentId,\n  icon: item.icon,\n  route_path: item.routePath,\n  sort_order: item.sortOrder,\n  is_active: item.isActive ?? true,\n  can_view: item.canView === 1,\n  can_create: item.canCreate === 1,\n  can_edit: item.canEdit === 1,\n  can_delete: item.canDelete === 1,\n  can_export: item.canExport === 1,\n  can_print: item.canPrint === 1,\n  children: item.children?.map(convertApiMenuItem) ?? [],\n});\n\n// Extended MenuItem with access permissions and HIS-specific properties\nexport interface MenuAccessItem extends MenuItem {\n  // Access permissions\n  can_view?: boolean;\n  can_create?: boolean;\n  can_edit?: boolean;\n  can_delete?: boolean;\n  can_export?: boolean;\n  can_print?: boolean;\n  \n  // HIS-specific UI properties\n  badge_count?: number;        // จำนวน notification (เช่น ผู้ป่วยรอตรวจ, รอจ่ายยา)\n  badge_type?: 'default' | 'warning' | 'danger' | 'success'; // สีของ badge\n  is_new?: boolean;            // แสดง label \"New\" สำหรับเมนูใหม่\n  has_notification?: boolean;  // แสดง status dot (สำหรับ ER, เคสด่วน)\n  notification_type?: 'info' | 'warning' | 'danger'; // ประเภท notification\n  shortcut_key?: string;       // Keyboard shortcut (เช่น 'Alt+O' สำหรับ OPD)\n  \n  children?: MenuAccessItem[];\n}\n\n// Badge configuration for different menu types\nexport interface MenuBadgeConfig {\n  menu_code: string;\n  count?: number;\n  type?: 'default' | 'warning' | 'danger' | 'success';\n  has_notification?: boolean;\n  notification_type?: 'info' | 'warning' | 'danger';\n}\n\ninterface MenuContextType {\n  menus: MenuAccessItem[];\n  flatMenus: MenuAccessItem[];\n  isLoading: boolean;\n  error: string | null;\n  refetch: () => Promise<void>;\n  getMenuByCode: (code: string) => MenuAccessItem | undefined;\n  getMenuByPath: (path: string) => MenuAccessItem | undefined;\n  hasAccess: (menuCode: string, action?: 'view' | 'create' | 'edit' | 'delete' | 'export' | 'print') => boolean;\n  checkAccess: (menuCode: string) => Promise<{\n    has_access: boolean;\n    can_view: boolean;\n    can_create: boolean;\n    can_edit: boolean;\n    can_delete: boolean;\n    can_export: boolean;\n    can_print: boolean;\n  } | null>;\n  // New methods for HIS badge management\n  updateMenuBadge: (menuCode: string, config: Partial<MenuBadgeConfig>) => void;\n  updateMenuBadges: (configs: MenuBadgeConfig[]) => void;\n  clearMenuBadge: (menuCode: string) => void;\n  clearAllBadges: () => void;\n}\n\nconst MenuContext = createContext<MenuContextType | null>(null);\n\n// Convert MenuItem to MenuAccessItem with default permissions\nconst toMenuAccessItem = (item: MenuItem): MenuAccessItem => ({\n  ...item,\n  // Access permissions\n  can_view: (item as MenuAccessItem).can_view ?? true,\n  can_create: (item as MenuAccessItem).can_create ?? false,\n  can_edit: (item as MenuAccessItem).can_edit ?? false,\n  can_delete: (item as MenuAccessItem).can_delete ?? false,\n  can_export: (item as MenuAccessItem).can_export ?? false,\n  can_print: (item as MenuAccessItem).can_print ?? false,\n  // HIS properties (preserve if exists, otherwise undefined)\n  badge_count: (item as MenuAccessItem).badge_count,\n  badge_type: (item as MenuAccessItem).badge_type,\n  is_new: (item as MenuAccessItem).is_new,\n  has_notification: (item as MenuAccessItem).has_notification,\n  notification_type: (item as MenuAccessItem).notification_type,\n  shortcut_key: (item as MenuAccessItem).shortcut_key,\n  children: item.children?.map(toMenuAccessItem) ?? [],\n});\n\n// Build tree structure from flat menu list\nconst buildMenuTree = (items: MenuAccessItem[]): MenuAccessItem[] => {\n  const menuMap = new Map<number, MenuAccessItem>();\n\n  // First pass: create all menu items with empty children arrays\n  items.forEach((item) => {\n    menuMap.set(item.id, { ...item, children: [] });\n  });\n\n  // Second pass: build the tree\n  const rootMenus: MenuAccessItem[] = [];\n\n  items.forEach((item) => {\n    const menuItem = menuMap.get(item.id)!;\n\n    if (item.parent_id === null || item.parent_id === undefined) {\n      rootMenus.push(menuItem);\n    } else {\n      const parent = menuMap.get(item.parent_id);\n      if (parent) {\n        if (!parent.children) {\n          parent.children = [];\n        }\n        parent.children.push(menuItem);\n      } else {\n        rootMenus.push(menuItem);\n      }\n    }\n  });\n\n  // Sort menus by sort_order\n  const sortMenus = (menus: MenuAccessItem[]): MenuAccessItem[] => {\n    return menus\n      .sort((a, b) => (a.sort_order || 0) - (b.sort_order || 0))\n      .map((menu) => ({\n        ...menu,\n        children: menu.children ? sortMenus(menu.children) : [],\n      }));\n  };\n\n  return sortMenus(rootMenus);\n};\n\n// Flatten tree to list\nconst flattenTree = (items: MenuAccessItem[]): MenuAccessItem[] => {\n  const result: MenuAccessItem[] = [];\n  const traverse = (menuItems: MenuAccessItem[]) => {\n    for (const item of menuItems) {\n      result.push(item);\n      if (item.children && item.children.length > 0) {\n        traverse(item.children);\n      }\n    }\n  };\n  traverse(items);\n  return result;\n};\n\n// Helper to update badge in menu tree\nconst updateBadgeInTree = (\n  menus: MenuAccessItem[],\n  menuCode: string,\n  config: Partial<MenuBadgeConfig>\n): MenuAccessItem[] => {\n  return menus.map((menu) => {\n    if (menu.menu_code === menuCode) {\n      return {\n        ...menu,\n        badge_count: config.count ?? menu.badge_count,\n        badge_type: config.type ?? menu.badge_type,\n        has_notification: config.has_notification ?? menu.has_notification,\n        notification_type: config.notification_type ?? menu.notification_type,\n      };\n    }\n    if (menu.children && menu.children.length > 0) {\n      return {\n        ...menu,\n        children: updateBadgeInTree(menu.children, menuCode, config),\n      };\n    }\n    return menu;\n  });\n};\n\n// Helper to clear badge in menu tree\nconst clearBadgeInTree = (menus: MenuAccessItem[], menuCode: string): MenuAccessItem[] => {\n  return menus.map((menu) => {\n    if (menu.menu_code === menuCode) {\n      return {\n        ...menu,\n        badge_count: undefined,\n        badge_type: undefined,\n        has_notification: false,\n        notification_type: undefined,\n      };\n    }\n    if (menu.children && menu.children.length > 0) {\n      return {\n        ...menu,\n        children: clearBadgeInTree(menu.children, menuCode),\n      };\n    }\n    return menu;\n  });\n};\n\n// Helper to clear all badges\nconst clearAllBadgesInTree = (menus: MenuAccessItem[]): MenuAccessItem[] => {\n  return menus.map((menu) => ({\n    ...menu,\n    badge_count: undefined,\n    badge_type: undefined,\n    has_notification: false,\n    notification_type: undefined,\n    children: menu.children ? clearAllBadgesInTree(menu.children) : [],\n  }));\n};\n\ninterface MenuProviderProps {\n  children: ReactNode;\n}\n\nexport function MenuProvider({ children }: MenuProviderProps) {\n  const { isAuthenticated, token } = useAuth();\n  const [menus, setMenus] = useState<MenuAccessItem[]>([]);\n  const [flatMenus, setFlatMenus] = useState<MenuAccessItem[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const fetchMenus = useCallback(async () => {\n    if (!isAuthenticated || !token) {\n      setMenus([]);\n      setFlatMenus([]);\n      return;\n    }\n\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      // Try to get user's menu tree first\n      let rawData: ApiMenuItem[] = [];\n      \n      try {\n        const response = await menuApi.getMyTree();\n        if (response.success && response.data) {\n          // API returns camelCase, need to cast\n          rawData = response.data as unknown as ApiMenuItem[];\n        }\n      } catch {\n        // Fallback to all menus if my/tree fails\n        console.warn('Failed to get user menu tree, falling back to all menus');\n        const fallbackResponse = await menuApi.getAll();\n        if (fallbackResponse.success && fallbackResponse.data) {\n          rawData = fallbackResponse.data as unknown as ApiMenuItem[];\n        }\n      }\n\n      if (rawData.length > 0) {\n        // Convert API response (camelCase) to frontend format (snake_case)\n        const data = rawData.map(convertApiMenuItem);\n        \n        // Convert to MenuAccessItem with default permissions\n        const accessItems = data.map(toMenuAccessItem);\n\n        // Check if data already has nested children (is a tree)\n        const isAlreadyTree = accessItems.some(\n          (item) => item.children && Array.isArray(item.children) && item.children.length > 0\n        );\n\n        if (isAlreadyTree) {\n          setMenus(accessItems);\n          setFlatMenus(flattenTree(accessItems));\n        } else {\n          const menuTree = buildMenuTree(accessItems);\n          setMenus(menuTree);\n          setFlatMenus(accessItems);\n        }\n      } else {\n        setMenus([]);\n        setFlatMenus([]);\n      }\n    } catch (err: unknown) {\n      const error = err as { message?: string };\n      setError(error.message || 'Failed to fetch menus');\n      setMenus([]);\n      setFlatMenus([]);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [isAuthenticated, token]);\n\n  useEffect(() => {\n    fetchMenus();\n  }, [fetchMenus]);\n\n  const getMenuByCode = useCallback(\n    (code: string): MenuAccessItem | undefined => {\n      return flatMenus.find((menu) => menu.menu_code === code);\n    },\n    [flatMenus]\n  );\n\n  const getMenuByPath = useCallback(\n    (path: string): MenuAccessItem | undefined => {\n      return flatMenus.find((menu) => menu.route_path === path);\n    },\n    [flatMenus]\n  );\n\n  const hasAccess = useCallback(\n    (\n      menuCode: string,\n      action: 'view' | 'create' | 'edit' | 'delete' | 'export' | 'print' = 'view'\n    ): boolean => {\n      const menu = getMenuByCode(menuCode);\n      if (!menu) return false;\n\n      switch (action) {\n        case 'view':\n          return menu.can_view ?? true;\n        case 'create':\n          return menu.can_create ?? false;\n        case 'edit':\n          return menu.can_edit ?? false;\n        case 'delete':\n          return menu.can_delete ?? false;\n        case 'export':\n          return menu.can_export ?? false;\n        case 'print':\n          return menu.can_print ?? false;\n        default:\n          return false;\n      }\n    },\n    [getMenuByCode]\n  );\n\n  const checkAccess = useCallback(async (menuCode: string) => {\n    try {\n      const response = await menuApi.checkMyAccess(menuCode);\n      if (response.success) {\n        return response.data;\n      }\n      return null;\n    } catch {\n      return null;\n    }\n  }, []);\n\n  // Update single menu badge\n  const updateMenuBadge = useCallback((menuCode: string, config: Partial<MenuBadgeConfig>) => {\n    setMenus((prev) => updateBadgeInTree(prev, menuCode, config));\n    setFlatMenus((prev) =>\n      prev.map((menu) =>\n        menu.menu_code === menuCode\n          ? {\n              ...menu,\n              badge_count: config.count ?? menu.badge_count,\n              badge_type: config.type ?? menu.badge_type,\n              has_notification: config.has_notification ?? menu.has_notification,\n              notification_type: config.notification_type ?? menu.notification_type,\n            }\n          : menu\n      )\n    );\n  }, []);\n\n  // Update multiple menu badges at once\n  const updateMenuBadges = useCallback((configs: MenuBadgeConfig[]) => {\n    setMenus((prev) => {\n      let updated = prev;\n      for (const config of configs) {\n        updated = updateBadgeInTree(updated, config.menu_code, config);\n      }\n      return updated;\n    });\n    setFlatMenus((prev) =>\n      prev.map((menu) => {\n        const config = configs.find((c) => c.menu_code === menu.menu_code);\n        if (config) {\n          return {\n            ...menu,\n            badge_count: config.count ?? menu.badge_count,\n            badge_type: config.type ?? menu.badge_type,\n            has_notification: config.has_notification ?? menu.has_notification,\n            notification_type: config.notification_type ?? menu.notification_type,\n          };\n        }\n        return menu;\n      })\n    );\n  }, []);\n\n  // Clear single menu badge\n  const clearMenuBadge = useCallback((menuCode: string) => {\n    setMenus((prev) => clearBadgeInTree(prev, menuCode));\n    setFlatMenus((prev) =>\n      prev.map((menu) =>\n        menu.menu_code === menuCode\n          ? {\n              ...menu,\n              badge_count: undefined,\n              badge_type: undefined,\n              has_notification: false,\n              notification_type: undefined,\n            }\n          : menu\n      )\n    );\n  }, []);\n\n  // Clear all badges\n  const clearAllBadges = useCallback(() => {\n    setMenus((prev) => clearAllBadgesInTree(prev));\n    setFlatMenus((prev) =>\n      prev.map((menu) => ({\n        ...menu,\n        badge_count: undefined,\n        badge_type: undefined,\n        has_notification: false,\n        notification_type: undefined,\n      }))\n    );\n  }, []);\n\n  const value: MenuContextType = {\n    menus,\n    flatMenus,\n    isLoading,\n    error,\n    refetch: fetchMenus,\n    getMenuByCode,\n    getMenuByPath,\n    hasAccess,\n    checkAccess,\n    updateMenuBadge,\n    updateMenuBadges,\n    clearMenuBadge,\n    clearAllBadges,\n  };\n\n  return <MenuContext.Provider value={value}>{children}</MenuContext.Provider>;\n}\n\nexport function useMenuContext() {\n  const context = useContext(MenuContext);\n  if (context === null) {\n    throw new Error('useMenuContext must be used within a MenuProvider');\n  }\n  return context;\n}\n\n// =============================================================================\n// Custom hook for HIS badge updates (ใช้ร่วมกับ WebSocket หรือ polling)\n// =============================================================================\nexport function useMenuBadgeUpdater() {\n  const { updateMenuBadge, updateMenuBadges, clearMenuBadge, clearAllBadges } = useMenuContext();\n\n  // ตัวอย่างการอัปเดต badge สำหรับ OPD queue\n  const updateOPDQueue = useCallback(\n    (count: number) => {\n      updateMenuBadge('OPD', {\n        count,\n        type: count > 20 ? 'danger' : count > 10 ? 'warning' : 'default',\n        has_notification: count > 0,\n      });\n    },\n    [updateMenuBadge]\n  );\n\n  // ตัวอย่างการอัปเดต badge สำหรับ IPD\n  const updateIPDPatients = useCallback(\n    (count: number) => {\n      updateMenuBadge('IPD', {\n        count,\n        type: 'default',\n      });\n    },\n    [updateMenuBadge]\n  );\n\n  // ตัวอย่างการแจ้งเตือน ER ด่วน\n  const setERAlert = useCallback(\n    (hasAlert: boolean) => {\n      updateMenuBadge('ER', {\n        has_notification: hasAlert,\n        notification_type: 'danger',\n      });\n    },\n    [updateMenuBadge]\n  );\n\n  // ตัวอย่างการอัปเดตหลายเมนูพร้อมกัน\n  const updateAllCounts = useCallback(\n    (data: { opd?: number; ipd?: number; pharmacy?: number; er?: boolean }) => {\n      const configs: MenuBadgeConfig[] = [];\n\n      if (data.opd !== undefined) {\n        configs.push({\n          menu_code: 'OPD',\n          count: data.opd,\n          type: data.opd > 20 ? 'danger' : data.opd > 10 ? 'warning' : 'default',\n          has_notification: data.opd > 0,\n        });\n      }\n\n      if (data.ipd !== undefined) {\n        configs.push({\n          menu_code: 'IPD',\n          count: data.ipd,\n          type: 'default',\n        });\n      }\n\n      if (data.pharmacy !== undefined) {\n        configs.push({\n          menu_code: 'PHARMACY',\n          count: data.pharmacy,\n          type: data.pharmacy > 30 ? 'warning' : 'default',\n        });\n      }\n\n      if (data.er !== undefined) {\n        configs.push({\n          menu_code: 'ER',\n          has_notification: data.er,\n          notification_type: 'danger',\n        });\n      }\n\n      if (configs.length > 0) {\n        updateMenuBadges(configs);\n      }\n    },\n    [updateMenuBadges]\n  );\n\n  return {\n    updateMenuBadge,\n    updateMenuBadges,\n    clearMenuBadge,\n    clearAllBadges,\n    // HIS-specific helpers\n    updateOPDQueue,\n    updateIPDPatients,\n    setERAlert,\n    updateAllCounts,\n  };\n}"],"names":[],"mappings":"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"}}]
}