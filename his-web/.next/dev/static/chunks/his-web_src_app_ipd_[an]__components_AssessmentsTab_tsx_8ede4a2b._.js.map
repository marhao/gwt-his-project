{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/auto/programming/gwt/gwt-his/his-web/src/app/ipd/%5Ban%5D/_components/AssessmentsTab.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useMemo, useCallback, useRef, useEffect } from 'react';\nimport {\n  FileText, Search, Filter, ChevronRight, Check, Clock, AlertTriangle,\n  User, Download, Printer, Eye, Edit, Plus, X, ChevronLeft,\n  ClipboardList, Heart, Shield, Activity, Pill, Scale, Users,\n  AlertCircle, CheckCircle2, FileQuestion, LayoutGrid, LayoutList,\n  ChevronDown, ArrowLeft, MousePointer2, Type,\n  MoveRight, Pencil, Undo2, Redo2, Trash2, Save, Loader2, ZoomIn, ZoomOut,\n  Eraser,\n} from 'lucide-react';\n\n// ============================================\n// Types\n// ============================================\n\ntype AssessmentStatus = 'completed' | 'pending' | 'in_progress' | 'overdue';\ntype ViewMode = 'list' | 'grid';\ntype AnnotationTool = 'select' | 'text' | 'arrow' | 'freehand';\n\ninterface AssessmentCategory {\n  id: string;\n  name: string;\n  icon: any;\n  color: string;\n  count: number;\n}\n\ninterface AssessmentForm {\n  id: number;\n  category: string;\n  name: string;\n  nameTh: string;\n  status: AssessmentStatus;\n  score?: string;\n  riskLevel?: 'low' | 'moderate' | 'high' | 'critical';\n  assessedBy?: string;\n  assessedDate?: string;\n  assessedTime?: string;\n  dueDate?: string;\n  version: number;\n  lastUpdated?: string;\n  notes?: string;\n}\n\ninterface TextAnnotation {\n  id: string;\n  type: 'text';\n  x: number;\n  y: number;\n  text: string;\n  fontSize: number;\n  color: string;\n  pageIndex: number;\n}\n\ninterface ArrowAnnotation {\n  id: string;\n  type: 'arrow';\n  startX: number;\n  startY: number;\n  endX: number;\n  endY: number;\n  color: string;\n  strokeWidth: number;\n  pageIndex: number;\n}\n\ninterface FreehandAnnotation {\n  id: string;\n  type: 'freehand';\n  points: { x: number; y: number }[];\n  color: string;\n  strokeWidth: number;\n  pageIndex: number;\n}\n\ntype AllAnnotation = TextAnnotation | ArrowAnnotation | FreehandAnnotation;\n\n// ============================================\n// Constants\n// ============================================\n\nconst CANVAS_WIDTH = 794;\nconst CANVAS_HEIGHT = 1123;\nconst ANNOTATION_COLORS = [\n  { color: '#ef4444', name: 'แดง' },\n  { color: '#3b82f6', name: 'น้ำเงิน' },\n  { color: '#22c55e', name: 'เขียว' },\n  { color: '#f59e0b', name: 'ส้ม' },\n  { color: '#8b5cf6', name: 'ม่วง' },\n  { color: '#0d9488', name: 'Teal' },\n  { color: '#000000', name: 'ดำ' },\n];\nconst MAX_HISTORY = 50;\n\n// ============================================\n// Mock Data\n// ============================================\n\nconst categories: AssessmentCategory[] = [\n  { id: 'all', name: 'ทั้งหมด', icon: FileText, color: 'slate', count: 15 },\n  { id: 'initial', name: 'Initial Assessment', icon: ClipboardList, color: 'blue', count: 2 },\n  { id: 'nursing', name: 'Nursing Assessment', icon: Users, color: 'purple', count: 3 },\n  { id: 'risk', name: 'Risk Assessment', icon: AlertTriangle, color: 'amber', count: 4 },\n  { id: 'pain', name: 'Pain Assessment', icon: Activity, color: 'red', count: 2 },\n  { id: 'nutrition', name: 'Nutrition', icon: Scale, color: 'emerald', count: 1 },\n  { id: 'medication', name: 'Medication', icon: Pill, color: 'pink', count: 2 },\n  { id: 'discharge', name: 'Discharge Planning', icon: Shield, color: 'cyan', count: 1 },\n];\n\nconst mockAssessments: AssessmentForm[] = [\n  { id: 1, category: 'initial', name: 'Initial Nursing Assessment', nameTh: 'แบบประเมินแรกรับทางการพยาบาล', status: 'completed', assessedBy: 'พยาบาลสมหญิง รักดี', assessedDate: '15/01/67', assessedTime: '14:45', version: 1, lastUpdated: '15/01/67 14:45' },\n  { id: 2, category: 'initial', name: 'Medical History Assessment', nameTh: 'แบบประเมินประวัติการเจ็บป่วย', status: 'completed', assessedBy: 'นพ.วิชัย หัวใจดี', assessedDate: '15/01/67', assessedTime: '15:00', version: 1, lastUpdated: '15/01/67 15:00' },\n  { id: 3, category: 'risk', name: 'Fall Risk Assessment (Morse)', nameTh: 'แบบประเมินความเสี่ยงต่อการพลัดตกหกล้ม', status: 'completed', score: '55/125', riskLevel: 'high', assessedBy: 'พยาบาลสมหญิง รักดี', assessedDate: '15/01/67', assessedTime: '14:50', version: 2, lastUpdated: '17/01/67 08:00', notes: 'ประเมินซ้ำทุก shift' },\n  { id: 4, category: 'risk', name: 'Pressure Ulcer Risk (Braden Scale)', nameTh: 'แบบประเมินความเสี่ยงต่อการเกิดแผลกดทับ', status: 'completed', score: '14/23', riskLevel: 'moderate', assessedBy: 'พยาบาลวิไล ใจดี', assessedDate: '15/01/67', assessedTime: '15:00', version: 1, lastUpdated: '15/01/67 15:00' },\n  { id: 5, category: 'risk', name: 'DVT Risk Assessment', nameTh: 'แบบประเมินความเสี่ยง DVT', status: 'completed', score: '3/8', riskLevel: 'high', assessedBy: 'นพ.วิชัย หัวใจดี', assessedDate: '15/01/67', assessedTime: '15:30', version: 1, lastUpdated: '15/01/67 15:30' },\n  { id: 6, category: 'risk', name: 'Suicide Risk Assessment', nameTh: 'แบบประเมินความเสี่ยงต่อการทำร้ายตนเอง', status: 'completed', score: '0/10', riskLevel: 'low', assessedBy: 'พยาบาลสมหญิง รักดี', assessedDate: '15/01/67', assessedTime: '14:55', version: 1, lastUpdated: '15/01/67 14:55' },\n  { id: 7, category: 'pain', name: 'Pain Assessment (NRS)', nameTh: 'แบบประเมินความปวด', status: 'completed', score: '3/10', riskLevel: 'low', assessedBy: 'พยาบาลวิไล ใจดี', assessedDate: '17/01/67', assessedTime: '08:00', version: 5, lastUpdated: '17/01/67 08:00', notes: 'ปวดลดลงจาก 7/10 แรกรับ' },\n  { id: 8, category: 'pain', name: 'Chest Pain Assessment', nameTh: 'แบบประเมินอาการเจ็บหน้าอก', status: 'in_progress', assessedBy: 'นพ.วิชัย หัวใจดี', assessedDate: '17/01/67', assessedTime: '09:00', version: 3, lastUpdated: '17/01/67 09:00' },\n  { id: 9, category: 'nursing', name: 'Functional Assessment (ADL)', nameTh: 'แบบประเมินความสามารถในการทำกิจวัตรประจำวัน', status: 'completed', score: '85/100', assessedBy: 'พยาบาลสมหญิง รักดี', assessedDate: '15/01/67', assessedTime: '15:00', version: 1, lastUpdated: '15/01/67 15:00' },\n  { id: 10, category: 'nursing', name: 'Skin Assessment', nameTh: 'แบบประเมินสภาพผิวหนัง', status: 'completed', assessedBy: 'พยาบาลวิไล ใจดี', assessedDate: '17/01/67', assessedTime: '08:00', version: 2, lastUpdated: '17/01/67 08:00' },\n  { id: 11, category: 'nursing', name: 'Neurological Assessment (GCS)', nameTh: 'แบบประเมินระดับความรู้สึกตัว', status: 'completed', score: 'E4V5M6 = 15', assessedBy: 'พยาบาลสมหญิง รักดี', assessedDate: '17/01/67', assessedTime: '08:00', version: 3, lastUpdated: '17/01/67 08:00' },\n  { id: 12, category: 'nutrition', name: 'Nutritional Assessment (SGA)', nameTh: 'แบบประเมินภาวะโภชนาการ', status: 'pending', dueDate: '18/01/67', version: 0 },\n  { id: 13, category: 'medication', name: 'Medication Reconciliation - Admission', nameTh: 'การสอบทานรายการยาแรกรับ', status: 'completed', assessedBy: 'ภญ.สุภา ยาดี', assessedDate: '15/01/67', assessedTime: '16:00', version: 1, lastUpdated: '15/01/67 16:00' },\n  { id: 14, category: 'medication', name: 'High Alert Drug Assessment', nameTh: 'แบบประเมินการใช้ยาความเสี่ยงสูง', status: 'completed', riskLevel: 'high', assessedBy: 'ภญ.สุภา ยาดี', assessedDate: '15/01/67', assessedTime: '16:30', version: 1, lastUpdated: '15/01/67 16:30', notes: 'Enoxaparin, Morphine' },\n  { id: 15, category: 'discharge', name: 'Discharge Planning Assessment', nameTh: 'แบบประเมินการวางแผนจำหน่าย', status: 'in_progress', assessedBy: 'พยาบาลสมหญิง รักดี', assessedDate: '16/01/67', assessedTime: '10:00', version: 1, lastUpdated: '16/01/67 10:00' },\n];\n\n// ============================================\n// Helper Functions & Components\n// ============================================\n\nconst getStatusConfig = (status: AssessmentStatus) => {\n  const configs = {\n    completed: { label: 'เสร็จสิ้น', icon: CheckCircle2, bg: 'bg-emerald-100 dark:bg-emerald-500/20', text: 'text-emerald-700 dark:text-emerald-400' },\n    pending: { label: 'รอดำเนินการ', icon: Clock, bg: 'bg-amber-100 dark:bg-amber-500/20', text: 'text-amber-700 dark:text-amber-400' },\n    in_progress: { label: 'กำลังดำเนินการ', icon: Edit, bg: 'bg-blue-100 dark:bg-blue-500/20', text: 'text-blue-700 dark:text-blue-400' },\n    overdue: { label: 'เกินกำหนด', icon: AlertCircle, bg: 'bg-red-100 dark:bg-red-500/20', text: 'text-red-700 dark:text-red-400' },\n  };\n  return configs[status];\n};\n\nconst getRiskConfig = (risk?: 'low' | 'moderate' | 'high' | 'critical') => {\n  if (!risk) return null;\n  const configs = {\n    low: { label: 'เสี่ยงต่ำ', bg: 'bg-emerald-500' },\n    moderate: { label: 'เสี่ยงปานกลาง', bg: 'bg-amber-500' },\n    high: { label: 'เสี่ยงสูง', bg: 'bg-orange-500' },\n    critical: { label: 'เสี่ยงวิกฤต', bg: 'bg-red-500' },\n  };\n  return configs[risk];\n};\n\nconst StatusBadge = ({ status }: { status: AssessmentStatus }) => {\n  const config = getStatusConfig(status);\n  const Icon = config.icon;\n  return (\n    <span className={`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium ${config.bg} ${config.text}`}>\n      <Icon className=\"w-3 h-3\" />\n      <span className=\"hidden sm:inline\">{config.label}</span>\n    </span>\n  );\n};\n\nconst RiskBadge = ({ risk }: { risk?: 'low' | 'moderate' | 'high' | 'critical' }) => {\n  const config = getRiskConfig(risk);\n  if (!config) return null;\n  return <span className={`inline-flex items-center px-2 py-0.5 rounded text-xs font-bold text-white ${config.bg}`}>{config.label}</span>;\n};\n\nconst CategoryIcon = ({ category, size = 'md' }: { category: string; size?: 'sm' | 'md' }) => {\n  const cat = categories.find(c => c.id === category);\n  if (!cat) return null;\n  const Icon = cat.icon;\n  const colorMap: Record<string, string> = {\n    blue: 'bg-blue-100 dark:bg-blue-500/20 text-blue-600 dark:text-blue-400',\n    purple: 'bg-purple-100 dark:bg-purple-500/20 text-purple-600 dark:text-purple-400',\n    amber: 'bg-amber-100 dark:bg-amber-500/20 text-amber-600 dark:text-amber-400',\n    red: 'bg-red-100 dark:bg-red-500/20 text-red-600 dark:text-red-400',\n    emerald: 'bg-emerald-100 dark:bg-emerald-500/20 text-emerald-600 dark:text-emerald-400',\n    pink: 'bg-pink-100 dark:bg-pink-500/20 text-pink-600 dark:text-pink-400',\n    cyan: 'bg-cyan-100 dark:bg-cyan-500/20 text-cyan-600 dark:text-cyan-400',\n    slate: 'bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-400',\n  };\n  const sizeClass = size === 'sm' ? 'w-8 h-8' : 'w-10 h-10';\n  const iconSize = size === 'sm' ? 'w-4 h-4' : 'w-5 h-5';\n  return <div className={`${sizeClass} rounded-xl flex items-center justify-center flex-shrink-0 ${colorMap[cat.color]}`}><Icon className={iconSize} /></div>;\n};\n\nconst CategoryDropdown = ({ selectedCategory, onSelect }: { selectedCategory: string; onSelect: (id: string) => void }) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const selected = categories.find(c => c.id === selectedCategory);\n  const Icon = selected?.icon || FileText;\n\n  return (\n    <div className=\"relative\">\n      <button onClick={() => setIsOpen(!isOpen)} className=\"flex items-center gap-2 px-3 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-sm font-medium text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors w-full\">\n        <Icon className=\"w-4 h-4 text-teal-500\" />\n        <span className=\"flex-1 text-left truncate\">{selected?.name}</span>\n        <span className=\"px-1.5 py-0.5 bg-teal-100 dark:bg-teal-500/20 text-teal-600 dark:text-teal-400 rounded text-xs font-bold\">{selected?.count}</span>\n        <ChevronDown className={`w-4 h-4 text-slate-400 transition-transform ${isOpen ? 'rotate-180' : ''}`} />\n      </button>\n      {isOpen && (\n        <>\n          <div className=\"fixed inset-0 z-10\" onClick={() => setIsOpen(false)} />\n          <div className=\"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl shadow-lg z-20 overflow-hidden max-h-64 overflow-y-auto\">\n            {categories.map((cat) => {\n              const CatIcon = cat.icon;\n              const isActive = selectedCategory === cat.id;\n              return (\n                <button key={cat.id} onClick={() => { onSelect(cat.id); setIsOpen(false); }} className={`w-full flex items-center gap-3 px-3 py-2.5 text-sm transition-colors ${isActive ? 'bg-teal-50 dark:bg-teal-500/20 text-teal-700 dark:text-teal-400 font-semibold' : 'text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700'}`}>\n                  <CatIcon className=\"w-4 h-4\" />\n                  <span className=\"flex-1 text-left\">{cat.name}</span>\n                  <span className={`px-1.5 py-0.5 rounded text-xs font-bold ${isActive ? 'bg-teal-200 dark:bg-teal-500/30' : 'bg-slate-200 dark:bg-slate-600'}`}>{cat.count}</span>\n                </button>\n              );\n            })}\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\n// ============================================\n// Fullscreen A4 Preview (unchanged - already fullscreen)\n// ============================================\n\nconst FullscreenA4Preview = ({ assessment, onClose }: { assessment: AssessmentForm; onClose: () => void }) => {\n  const [zoom, setZoom] = useState(1);\n  const [activeTool, setActiveTool] = useState<AnnotationTool>('select');\n  const [annotations, setAnnotations] = useState<AllAnnotation[]>([]);\n  const [selectedAnnotationId, setSelectedAnnotationId] = useState<string | null>(null);\n  const [annotationColor, setAnnotationColor] = useState('#0d9488');\n  const [editingTextId, setEditingTextId] = useState<string | null>(null);\n  const [showColorPicker, setShowColorPicker] = useState(false);\n  const [currentArrow, setCurrentArrow] = useState<{ startX: number; startY: number; endX: number; endY: number } | null>(null);\n  const [freehandPoints, setFreehandPoints] = useState<{ x: number; y: number }[]>([]);\n  \n  const isDrawingRef = useRef(false);\n  const drawStartRef = useRef<{ x: number; y: number } | null>(null);\n  const activeToolRef = useRef<AnnotationTool>('select');\n  const annotationColorRef = useRef('#0d9488');\n  const zoomRef = useRef(1);\n  const canvasRef = useRef<HTMLDivElement>(null);\n  \n  const [history, setHistory] = useState<AllAnnotation[][]>([[]]);\n  const [historyIndex, setHistoryIndex] = useState(0);\n  const [isSaving, setIsSaving] = useState(false);\n  const [saveSuccess, setSaveSuccess] = useState(false);\n  \n  useEffect(() => { activeToolRef.current = activeTool; }, [activeTool]);\n  useEffect(() => { annotationColorRef.current = annotationColor; }, [annotationColor]);\n  useEffect(() => { zoomRef.current = zoom; }, [zoom]);\n  \n  const canUndo = historyIndex > 0;\n  const canRedo = historyIndex < history.length - 1;\n  const currentAnnotations = annotations.filter(a => a.pageIndex === 0);\n  \n  const saveToHistory = useCallback((newAnnotations: AllAnnotation[]) => {\n    setHistory(prev => {\n      const newHistory = prev.slice(0, historyIndex + 1);\n      newHistory.push([...newAnnotations]);\n      if (newHistory.length > MAX_HISTORY) newHistory.shift();\n      return newHistory;\n    });\n    setHistoryIndex(prev => Math.min(prev + 1, MAX_HISTORY - 1));\n  }, [historyIndex]);\n\n  const addAnnotation = useCallback((annotation: AllAnnotation) => {\n    setAnnotations(prev => {\n      const newAnnotations = [...prev, annotation];\n      saveToHistory(newAnnotations);\n      return newAnnotations;\n    });\n  }, [saveToHistory]);\n\n  const deleteAnnotation = useCallback((id: string) => {\n    setAnnotations(prev => {\n      const newAnnotations = prev.filter(a => a.id !== id);\n      saveToHistory(newAnnotations);\n      return newAnnotations;\n    });\n    setSelectedAnnotationId(null);\n    setEditingTextId(null);\n  }, [saveToHistory]);\n\n  const handleUndo = useCallback(() => {\n    if (historyIndex > 0) {\n      const newIndex = historyIndex - 1;\n      setHistoryIndex(newIndex);\n      setAnnotations(history[newIndex] || []);\n      setSelectedAnnotationId(null);\n    }\n  }, [historyIndex, history]);\n\n  const handleRedo = useCallback(() => {\n    if (historyIndex < history.length - 1) {\n      const newIndex = historyIndex + 1;\n      setHistoryIndex(newIndex);\n      setAnnotations(history[newIndex] || []);\n      setSelectedAnnotationId(null);\n    }\n  }, [historyIndex, history]);\n\n  const clearAllAnnotations = useCallback(() => {\n    if (annotations.length === 0) return;\n    const confirmed = window.confirm('ต้องการลบ annotation ทั้งหมด?');\n    if (!confirmed) return;\n    setAnnotations([]);\n    saveToHistory([]);\n    setSelectedAnnotationId(null);\n  }, [annotations.length, saveToHistory]);\n\n  const getCanvasCoords = useCallback((clientX: number, clientY: number): { x: number; y: number } | null => {\n    const canvas = canvasRef.current;\n    if (!canvas) return null;\n    const rect = canvas.getBoundingClientRect();\n    return { x: (clientX - rect.left) / zoomRef.current, y: (clientY - rect.top) / zoomRef.current };\n  }, []);\n\n  const handleCanvasClick = (e: React.MouseEvent) => {\n    if (activeTool === 'select') { setSelectedAnnotationId(null); setEditingTextId(null); return; }\n    if (activeTool === 'text') {\n      const canvas = canvasRef.current;\n      if (!canvas) return;\n      const rect = canvas.getBoundingClientRect();\n      const coords = { x: (e.clientX - rect.left) / zoom, y: (e.clientY - rect.top) / zoom };\n      const newText: TextAnnotation = { id: `text-${Date.now()}`, type: 'text', x: coords.x, y: coords.y, text: '', fontSize: 14, color: annotationColor, pageIndex: 0 };\n      addAnnotation(newText);\n      setEditingTextId(newText.id);\n      setSelectedAnnotationId(newText.id);\n    }\n  };\n\n  const handleMouseDown = (e: React.MouseEvent) => {\n    if (activeTool !== 'arrow' && activeTool !== 'freehand') return;\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    const rect = canvas.getBoundingClientRect();\n    const coords = { x: (e.clientX - rect.left) / zoom, y: (e.clientY - rect.top) / zoom };\n    isDrawingRef.current = true;\n    drawStartRef.current = coords;\n    if (activeTool === 'arrow') setCurrentArrow({ startX: coords.x, startY: coords.y, endX: coords.x, endY: coords.y });\n    else setFreehandPoints([coords]);\n  };\n\n  const handleMouseMove = (e: React.MouseEvent) => {\n    if (!isDrawingRef.current) return;\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    const rect = canvas.getBoundingClientRect();\n    const coords = { x: (e.clientX - rect.left) / zoom, y: (e.clientY - rect.top) / zoom };\n    if (activeTool === 'arrow' && drawStartRef.current) setCurrentArrow({ startX: drawStartRef.current.x, startY: drawStartRef.current.y, endX: coords.x, endY: coords.y });\n    else if (activeTool === 'freehand') setFreehandPoints(prev => [...prev, coords]);\n  };\n\n  const handleMouseUp = () => {\n    if (!isDrawingRef.current) return;\n    if (activeTool === 'arrow' && currentArrow) {\n      const dx = currentArrow.endX - currentArrow.startX;\n      const dy = currentArrow.endY - currentArrow.startY;\n      if (Math.sqrt(dx * dx + dy * dy) > 10) addAnnotation({ id: `arrow-${Date.now()}`, type: 'arrow', ...currentArrow, color: annotationColor, strokeWidth: 2, pageIndex: 0 });\n      setCurrentArrow(null);\n    } else if (activeTool === 'freehand' && freehandPoints.length > 1) {\n      addAnnotation({ id: `freehand-${Date.now()}`, type: 'freehand', points: freehandPoints, color: annotationColor, strokeWidth: 2, pageIndex: 0 });\n      setFreehandPoints([]);\n    }\n    isDrawingRef.current = false;\n    drawStartRef.current = null;\n  };\n\n  const handleTextChange = (id: string, text: string) => setAnnotations(prev => prev.map(a => a.id === id && a.type === 'text' ? { ...a, text } : a));\n  const handleTextBlur = (id: string, text: string) => { if (!text.trim()) deleteAnnotation(id); else saveToHistory(annotations); setEditingTextId(null); };\n\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (editingTextId) { if (e.key === 'Escape') setEditingTextId(null); return; }\n      if ((e.ctrlKey || e.metaKey) && e.key === 'z' && !e.shiftKey) { e.preventDefault(); handleUndo(); return; }\n      if ((e.ctrlKey || e.metaKey) && (e.key === 'y' || (e.key === 'z' && e.shiftKey))) { e.preventDefault(); handleRedo(); return; }\n      if ((e.key === 'Delete' || e.key === 'Backspace') && selectedAnnotationId) { e.preventDefault(); deleteAnnotation(selectedAnnotationId); return; }\n      if (e.key === 'Escape') { setSelectedAnnotationId(null); setActiveTool('select'); return; }\n      if (e.key === 'v' || e.key === 'V') setActiveTool('select');\n      if (e.key === 't' || e.key === 'T') setActiveTool('text');\n      if (e.key === 'a' || e.key === 'A') setActiveTool('arrow');\n      if (e.key === 'd' || e.key === 'D') setActiveTool('freehand');\n    };\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [handleUndo, handleRedo, deleteAnnotation, selectedAnnotationId, editingTextId]);\n\n  const handleSave = async () => { setIsSaving(true); await new Promise(resolve => setTimeout(resolve, 1000)); setIsSaving(false); setSaveSuccess(true); setTimeout(() => setSaveSuccess(false), 2000); };\n  const handleZoomIn = () => setZoom(prev => Math.min(prev + 0.1, 2));\n  const handleZoomOut = () => setZoom(prev => Math.max(prev - 0.1, 0.5));\n  const handlePrint = () => window.print();\n  const isDrawingTool = activeTool === 'arrow' || activeTool === 'freehand';\n\n  return (\n    <div className=\"fixed inset-0 z-50 bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-900 dark:to-slate-800 flex flex-col\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between px-4 py-3 bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl border-b border-slate-200/50 dark:border-slate-700/50 shadow-sm shrink-0\">\n        <div className=\"flex items-center gap-3\">\n          <button onClick={onClose} className=\"flex items-center gap-2 px-3 py-2 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 border border-slate-200 dark:border-slate-600 rounded-xl transition-all\">\n            <ArrowLeft className=\"w-4 h-4\" /><span className=\"text-sm font-medium hidden sm:inline\">กลับ</span>\n          </button>\n          <CategoryIcon category={assessment.category} size=\"sm\" />\n          <div className=\"hidden md:block\">\n            <h1 className=\"font-bold text-slate-800 dark:text-white text-base\">{assessment.name}</h1>\n            <p className=\"text-xs text-slate-500\">{assessment.nameTh}</p>\n          </div>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <StatusBadge status={assessment.status} />\n          {assessment.riskLevel && <RiskBadge risk={assessment.riskLevel} />}\n          <div className=\"hidden md:flex items-center bg-slate-100 dark:bg-slate-700 rounded-lg p-1\">\n            <button onClick={handleZoomOut} disabled={zoom <= 0.5} className=\"w-7 h-7 rounded flex items-center justify-center text-slate-600 dark:text-slate-300 hover:bg-white dark:hover:bg-slate-600 disabled:opacity-30\"><ZoomOut className=\"w-4 h-4\" /></button>\n            <span className=\"w-12 text-center text-xs font-medium text-slate-600 dark:text-slate-300\">{Math.round(zoom * 100)}%</span>\n            <button onClick={handleZoomIn} disabled={zoom >= 2} className=\"w-7 h-7 rounded flex items-center justify-center text-slate-600 dark:text-slate-300 hover:bg-white dark:hover:bg-slate-600 disabled:opacity-30\"><ZoomIn className=\"w-4 h-4\" /></button>\n          </div>\n          <button onClick={handlePrint} className=\"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg\"><Printer className=\"w-5 h-5 text-slate-500\" /></button>\n          <button className=\"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg\"><Download className=\"w-5 h-5 text-slate-500\" /></button>\n          <button onClick={handleSave} disabled={isSaving} className={`h-9 px-4 flex items-center gap-2 rounded-xl font-medium text-sm shadow-sm transition-all ${saveSuccess ? 'bg-emerald-500 text-white' : 'bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 text-white'}`}>\n            {isSaving ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : saveSuccess ? <Check className=\"w-4 h-4\" /> : <Save className=\"w-4 h-4\" />}\n            <span className=\"hidden sm:inline\">{saveSuccess ? 'บันทึกแล้ว' : isSaving ? 'กำลังบันทึก...' : 'บันทึก'}</span>\n          </button>\n          <button onClick={onClose} className=\"p-2 hover:bg-red-100 dark:hover:bg-red-500/20 rounded-lg\"><X className=\"w-5 h-5 text-slate-500\" /></button>\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <div className=\"flex-1 flex overflow-hidden\">\n        {/* Toolbar */}\n        <div className=\"w-14 bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl border-r border-slate-200/50 dark:border-slate-700/50 flex flex-col items-center py-4 gap-2 shrink-0\">\n          <div className=\"flex flex-col items-center gap-1 p-1.5 bg-slate-100 dark:bg-slate-700 rounded-xl\">\n            {[\n              { tool: 'select' as const, icon: MousePointer2, title: 'เลือก (V)' },\n              { tool: 'text' as const, icon: Type, title: 'ข้อความ (T)' },\n              { tool: 'arrow' as const, icon: MoveRight, title: 'ลูกศร (A)' },\n              { tool: 'freehand' as const, icon: Pencil, title: 'วาดเส้น (D)' },\n            ].map(({ tool, icon: Icon, title }) => (\n              <button key={tool} onClick={() => setActiveTool(tool)} className={`w-10 h-10 rounded-lg flex items-center justify-center transition-all ${activeTool === tool ? 'bg-gradient-to-br from-teal-500 to-cyan-500 text-white shadow-lg' : 'text-slate-500 hover:bg-white dark:hover:bg-slate-600'}`} title={title}><Icon className=\"w-5 h-5\" /></button>\n            ))}\n          </div>\n          <div className=\"w-8 h-px bg-slate-200 dark:bg-slate-700\" />\n          <div className=\"relative\">\n            <button onClick={() => setShowColorPicker(!showColorPicker)} className=\"w-10 h-10 rounded-lg border-2 border-slate-200 dark:border-slate-600\" style={{ backgroundColor: annotationColor }} />\n            {showColorPicker && (\n              <>\n                <div className=\"fixed inset-0 z-10\" onClick={() => setShowColorPicker(false)} />\n                <div className=\"absolute left-full ml-2 top-0 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl shadow-xl p-2 z-20 flex flex-col gap-1\">\n                  {ANNOTATION_COLORS.map(({ color, name }) => (\n                    <button key={color} onClick={() => { setAnnotationColor(color); setShowColorPicker(false); }} className={`w-8 h-8 rounded-lg ${annotationColor === color ? 'ring-2 ring-offset-2 ring-slate-400' : ''}`} style={{ backgroundColor: color }} title={name} />\n                  ))}\n                </div>\n              </>\n            )}\n          </div>\n          <div className=\"w-8 h-px bg-slate-200 dark:bg-slate-700\" />\n          <button onClick={handleUndo} disabled={!canUndo} className={`w-10 h-10 rounded-lg flex items-center justify-center ${canUndo ? 'text-slate-600 hover:bg-slate-100' : 'text-slate-300'}`}><Undo2 className=\"w-5 h-5\" /></button>\n          <button onClick={handleRedo} disabled={!canRedo} className={`w-10 h-10 rounded-lg flex items-center justify-center ${canRedo ? 'text-slate-600 hover:bg-slate-100' : 'text-slate-300'}`}><Redo2 className=\"w-5 h-5\" /></button>\n          <div className=\"w-8 h-px bg-slate-200 dark:bg-slate-700\" />\n          {selectedAnnotationId ? (\n            <button onClick={() => deleteAnnotation(selectedAnnotationId)} className=\"w-10 h-10 rounded-lg bg-red-100 text-red-600 hover:bg-red-200\"><Trash2 className=\"w-5 h-5\" /></button>\n          ) : currentAnnotations.length > 0 && (\n            <button onClick={clearAllAnnotations} className=\"w-10 h-10 rounded-lg text-slate-400 hover:bg-slate-100\"><Eraser className=\"w-5 h-5\" /></button>\n          )}\n        </div>\n\n        {/* Canvas Area */}\n        <div className=\"flex-1 overflow-auto p-6\">\n          <div ref={canvasRef} className={`relative bg-white shadow-2xl rounded-lg overflow-hidden mx-auto ${activeTool === 'text' && 'cursor-text'} ${isDrawingTool && 'cursor-crosshair'}`} style={{ width: `${CANVAS_WIDTH}px`, height: `${CANVAS_HEIGHT}px`, transform: `scale(${zoom})`, transformOrigin: 'top center' }} onClick={handleCanvasClick} onMouseDown={handleMouseDown} onMouseMove={handleMouseMove} onMouseUp={handleMouseUp} onMouseLeave={handleMouseUp}>\n            {/* Document Content */}\n            <div className=\"bg-gradient-to-r from-slate-700 to-slate-800 text-white px-8 py-6\">\n              <div className=\"flex justify-between\">\n                <div><h1 className=\"text-xl font-bold\">{assessment.name}</h1><p className=\"text-slate-300 mt-1\">{assessment.nameTh}</p></div>\n                <div className=\"text-right\"><div className=\"text-sm text-slate-300\">เอกสารเลขที่</div><div className=\"font-mono font-bold text-lg\">IPD-ASM-{assessment.id.toString().padStart(4, '0')}</div></div>\n              </div>\n            </div>\n\n            <div className=\"px-8 py-4 bg-slate-50 border-b border-slate-200\">\n              <div className=\"grid grid-cols-4 gap-6 text-sm\">\n                <div><span className=\"text-slate-500 block text-xs\">ชื่อผู้ป่วย:</span><p className=\"font-semibold\">นายสมชาย ใจดี</p></div>\n                <div><span className=\"text-slate-500 block text-xs\">HN:</span><p className=\"font-mono font-semibold\">6712345</p></div>\n                <div><span className=\"text-slate-500 block text-xs\">AN:</span><p className=\"font-mono font-semibold\">670001234</p></div>\n                <div><span className=\"text-slate-500 block text-xs\">Ward:</span><p className=\"font-semibold\">อายุรกรรม ชาย 1</p></div>\n              </div>\n            </div>\n\n            <div className=\"px-8 py-6\">\n              <div className=\"flex items-center gap-6 mb-6 pb-4 border-b border-slate-200\">\n                <div><span className=\"text-xs text-slate-500 block mb-1\">สถานะ</span><StatusBadge status={assessment.status} /></div>\n                {assessment.score && <div><span className=\"text-xs text-slate-500 block mb-1\">คะแนน</span><span className=\"text-xl font-bold\">{assessment.score}</span></div>}\n                {assessment.riskLevel && <div><span className=\"text-xs text-slate-500 block mb-1\">ระดับความเสี่ยง</span><RiskBadge risk={assessment.riskLevel} /></div>}\n              </div>\n\n              <div className=\"mb-6\">\n                <h3 className=\"font-semibold mb-3 flex items-center gap-2\">\n                  <span className=\"w-7 h-7 rounded-lg bg-teal-500 text-white flex items-center justify-center text-sm font-bold\">1</span>ข้อมูลทั่วไป\n                </h3>\n                <div className=\"bg-slate-50 rounded-xl p-4 border border-slate-100\">\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    {['รับทราบสิทธิผู้ป่วย', 'ยืนยันตัวตนผู้ป่วย', 'ประวัติแพ้ยา: Penicillin, Aspirin', 'โรคประจำตัว: HT, DM, DLP'].map((item, idx) => (\n                      <div key={idx} className=\"flex items-center gap-2\"><div className=\"w-5 h-5 rounded-full bg-emerald-500 flex items-center justify-center\"><Check className=\"w-3 h-3 text-white\" strokeWidth={3} /></div><span className=\"text-sm\">{item}</span></div>\n                    ))}\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"mb-6\">\n                <h3 className=\"font-semibold mb-3 flex items-center gap-2\">\n                  <span className=\"w-7 h-7 rounded-lg bg-teal-500 text-white flex items-center justify-center text-sm font-bold\">2</span>การประเมิน\n                </h3>\n                <div className=\"bg-slate-50 rounded-xl p-4 border border-slate-100\">\n                  <table className=\"w-full text-sm\">\n                    <thead><tr className=\"border-b border-slate-200\"><th className=\"text-left py-2 text-slate-500\">หัวข้อ</th><th className=\"text-center py-2 text-slate-500 w-20\">คะแนน</th><th className=\"text-left py-2 text-slate-500\">หมายเหตุ</th></tr></thead>\n                    <tbody>\n                      {[{ topic: 'ประวัติการพลัดตกหกล้ม', score: 25, note: 'มีประวัติ 1 ครั้ง' }, { topic: 'การใช้ยาที่มีผลต่อการทรงตัว', score: 15, note: 'Morphine PRN' }].map((row, idx) => (\n                        <tr key={idx} className=\"border-b border-slate-100\"><td className=\"py-3\">{row.topic}</td><td className=\"py-3 text-center font-semibold\">{row.score}</td><td className=\"py-3 text-slate-500\">{row.note}</td></tr>\n                      ))}\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n            </div>\n\n            {/* SVG Annotations Layer */}\n            <svg className=\"absolute inset-0 pointer-events-none\" width={CANVAS_WIDTH} height={CANVAS_HEIGHT} style={{ zIndex: 1000 }}>\n              {currentAnnotations.map(annotation => {\n                if (annotation.type === 'arrow') {\n                  const a = annotation as ArrowAnnotation;\n                  const angle = Math.atan2(a.endY - a.startY, a.endX - a.startX);\n                  const arrowLen = 12;\n                  return (\n                    <g key={a.id} className=\"pointer-events-auto cursor-pointer\" onClick={(e) => { e.stopPropagation(); setSelectedAnnotationId(a.id); setActiveTool('select'); }}>\n                      <line x1={a.startX} y1={a.startY} x2={a.endX} y2={a.endY} stroke={a.color} strokeWidth={2} />\n                      <polygon points={`${a.endX},${a.endY} ${a.endX - arrowLen * Math.cos(angle - Math.PI / 6)},${a.endY - arrowLen * Math.sin(angle - Math.PI / 6)} ${a.endX - arrowLen * Math.cos(angle + Math.PI / 6)},${a.endY - arrowLen * Math.sin(angle + Math.PI / 6)}`} fill={a.color} />\n                    </g>\n                  );\n                }\n                if (annotation.type === 'freehand') {\n                  const f = annotation as FreehandAnnotation;\n                  const pathD = f.points.map((p, i) => `${i === 0 ? 'M' : 'L'} ${p.x} ${p.y}`).join(' ');\n                  return <path key={f.id} d={pathD} stroke={f.color} strokeWidth={2} fill=\"none\" strokeLinecap=\"round\" className=\"pointer-events-auto cursor-pointer\" onClick={(e) => { e.stopPropagation(); setSelectedAnnotationId(f.id); setActiveTool('select'); }} />;\n                }\n                return null;\n              })}\n              {currentArrow && <line x1={currentArrow.startX} y1={currentArrow.startY} x2={currentArrow.endX} y2={currentArrow.endY} stroke={annotationColor} strokeWidth={2} strokeDasharray=\"5,5\" />}\n              {freehandPoints.length > 1 && <path d={freehandPoints.map((p, i) => `${i === 0 ? 'M' : 'L'} ${p.x} ${p.y}`).join(' ')} stroke={annotationColor} strokeWidth={2} fill=\"none\" opacity={0.7} />}\n            </svg>\n\n            {/* Text Annotations */}\n            {currentAnnotations.filter(a => a.type === 'text').map(annotation => {\n              const t = annotation as TextAnnotation;\n              const isEditing = editingTextId === t.id;\n              return (\n                <div key={t.id} className={`absolute ${selectedAnnotationId === t.id && !isEditing && 'ring-2 ring-teal-500 rounded'}`} style={{ left: t.x, top: t.y, color: t.color, fontSize: t.fontSize, zIndex: 1001 }} onClick={(e) => { e.stopPropagation(); setSelectedAnnotationId(t.id); if (!isEditing) setEditingTextId(t.id); }}>\n                  {isEditing ? (\n                    <input type=\"text\" value={t.text} onChange={(e) => handleTextChange(t.id, e.target.value)} onBlur={() => handleTextBlur(t.id, t.text)} onKeyDown={(e) => { if (e.key === 'Enter') handleTextBlur(t.id, t.text); if (e.key === 'Escape') setEditingTextId(null); }} autoFocus className=\"bg-white border-2 border-teal-400 rounded-lg px-2 py-1 min-w-[150px]\" style={{ color: t.color, fontSize: t.fontSize }} placeholder=\"พิมพ์ข้อความ...\" />\n                  ) : (\n                    <span className=\"cursor-pointer whitespace-nowrap px-1.5 py-0.5 rounded bg-white/80 shadow-sm\">{t.text || 'คลิกเพื่อพิมพ์...'}</span>\n                  )}\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      </div>\n\n      {activeTool !== 'select' && (\n        <div className=\"fixed bottom-4 left-1/2 -translate-x-1/2 bg-slate-800 text-white px-5 py-2.5 rounded-full text-sm shadow-xl flex items-center gap-2\">\n          {activeTool === 'text' && <><Type className=\"w-4 h-4 text-teal-400\" /> คลิกเพื่อเพิ่มข้อความ</>}\n          {activeTool === 'arrow' && <><MoveRight className=\"w-4 h-4 text-teal-400\" /> ลากเพื่อวาดลูกศร</>}\n          {activeTool === 'freehand' && <><Pencil className=\"w-4 h-4 text-teal-400\" /> ลากเพื่อวาดเส้น</>}\n          <span className=\"text-slate-400 text-xs ml-2\">กด ESC เพื่อยกเลิก</span>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// ============================================\n// Main Component - Dynamic Height\n// ============================================\n\nexport function AssessmentsTab() {\n  const [selectedCategory, setSelectedCategory] = useState('all');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [viewMode, setViewMode] = useState<ViewMode>('list');\n  const [selectedAssessment, setSelectedAssessment] = useState<AssessmentForm | null>(null);\n  const [isFullscreen, setIsFullscreen] = useState(false);\n\n  const filteredAssessments = useMemo(() => mockAssessments.filter(a => {\n    const matchesCategory = selectedCategory === 'all' || a.category === selectedCategory;\n    const matchesSearch = !searchQuery || a.name.toLowerCase().includes(searchQuery.toLowerCase()) || a.nameTh.includes(searchQuery);\n    return matchesCategory && matchesSearch;\n  }), [selectedCategory, searchQuery]);\n\n  const groupedAssessments = useMemo(() => {\n    if (selectedCategory !== 'all') return { [selectedCategory]: filteredAssessments };\n    const grouped: Record<string, AssessmentForm[]> = {};\n    filteredAssessments.forEach(a => { if (!grouped[a.category]) grouped[a.category] = []; grouped[a.category].push(a); });\n    return grouped;\n  }, [filteredAssessments, selectedCategory]);\n\n  const stats = useMemo(() => ({ total: mockAssessments.length, completed: mockAssessments.filter(a => a.status === 'completed').length, pending: mockAssessments.filter(a => a.status === 'pending').length, highRisk: mockAssessments.filter(a => a.riskLevel === 'high' || a.riskLevel === 'critical').length }), []);\n\n  const handleSelectAssessment = (assessment: AssessmentForm) => { setSelectedAssessment(assessment); setIsFullscreen(true); };\n  const handleCloseFullscreen = () => setIsFullscreen(false);\n\n  if (isFullscreen && selectedAssessment) return <FullscreenA4Preview assessment={selectedAssessment} onClose={handleCloseFullscreen} />;\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Header Card */}\n      <div className=\"bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm rounded-xl border border-slate-200/50 dark:border-slate-700/50 p-4\">\n        <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-3\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"p-2 rounded-xl bg-gradient-to-br from-teal-500 to-cyan-600 text-white shadow-lg shadow-teal-500/25\">\n              <FileText className=\"w-5 h-5\" />\n            </div>\n            <div>\n              <h2 className=\"font-bold text-slate-800 dark:text-white\">Assessment Forms</h2>\n              <p className=\"text-xs text-slate-500\">แบบประเมินผู้ป่วย</p>\n            </div>\n          </div>\n          <div className=\"flex items-center gap-2 flex-wrap\">\n            <span className=\"px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded-lg text-xs\">\n              <span className=\"text-slate-500\">ทั้งหมด:</span>\n              <span className=\"ml-1 font-bold text-slate-700 dark:text-slate-200\">{stats.total}</span>\n            </span>\n            <span className=\"px-2 py-1 bg-emerald-100 dark:bg-emerald-500/20 rounded-lg text-xs\">\n              <span className=\"text-emerald-600\">เสร็จ:</span>\n              <span className=\"ml-1 font-bold text-emerald-700\">{stats.completed}</span>\n            </span>\n            <span className=\"px-2 py-1 bg-amber-100 dark:bg-amber-500/20 rounded-lg text-xs\">\n              <span className=\"text-amber-600\">รอ:</span>\n              <span className=\"ml-1 font-bold text-amber-700\">{stats.pending}</span>\n            </span>\n            {stats.highRisk > 0 && (\n              <span className=\"px-2 py-1 bg-red-100 dark:bg-red-500/20 rounded-lg text-xs\">\n                <span className=\"text-red-600\">เสี่ยงสูง:</span>\n                <span className=\"ml-1 font-bold text-red-700\">{stats.highRisk}</span>\n              </span>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* Search & Filter Bar */}\n      <div className=\"bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm rounded-xl border border-slate-200/50 dark:border-slate-700/50 p-4\">\n        <div className=\"flex flex-col md:flex-row gap-3\">\n          {/* Category Dropdown - Mobile */}\n          <div className=\"md:w-52 shrink-0\">\n            <CategoryDropdown selectedCategory={selectedCategory} onSelect={setSelectedCategory} />\n          </div>\n          \n          {/* Search */}\n          <div className=\"relative flex-1\">\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400\" />\n            <input\n              type=\"text\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              placeholder=\"ค้นหาแบบประเมิน...\"\n              className=\"w-full pl-10 pr-4 py-2.5 bg-slate-100 dark:bg-slate-700 border-0 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-teal-500/30\"\n            />\n          </div>\n          \n          {/* View Mode & Add Button */}\n          <div className=\"flex items-center gap-2\">\n            <div className=\"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 rounded-lg p-1\">\n              <button\n                onClick={() => setViewMode('list')}\n                className={`p-2 rounded-md transition-colors ${viewMode === 'list' ? 'bg-white dark:bg-slate-600 shadow-sm text-slate-700' : 'text-slate-500 hover:text-slate-700'}`}\n              >\n                <LayoutList className=\"w-4 h-4\" />\n              </button>\n              <button\n                onClick={() => setViewMode('grid')}\n                className={`p-2 rounded-md transition-colors ${viewMode === 'grid' ? 'bg-white dark:bg-slate-600 shadow-sm text-slate-700' : 'text-slate-500 hover:text-slate-700'}`}\n              >\n                <LayoutGrid className=\"w-4 h-4\" />\n              </button>\n            </div>\n            <button className=\"px-4 py-2.5 bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 text-white rounded-xl text-sm font-semibold flex items-center gap-2 shadow-lg shadow-teal-500/25\">\n              <Plus className=\"w-4 h-4\" />\n              <span className=\"hidden sm:inline\">เพิ่มแบบประเมิน</span>\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Assessments List - Dynamic Height */}\n      <div className=\"bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm rounded-xl border border-slate-200/50 dark:border-slate-700/50\">\n        {/* List Header */}\n        <div className=\"px-4 py-3 border-b border-slate-200/50 dark:border-slate-700/50 flex items-center justify-between\">\n          <div className=\"flex items-center gap-2\">\n            <div className=\"p-1.5 rounded-lg bg-cyan-500\">\n              <FileText className=\"w-3.5 h-3.5 text-white\" />\n            </div>\n            <span className=\"text-sm font-bold text-slate-800 dark:text-white\">รายการแบบประเมิน</span>\n            <span className=\"px-2 py-0.5 rounded-full text-xs font-bold bg-cyan-100 dark:bg-cyan-500/20 text-cyan-600 dark:text-cyan-400\">\n              {filteredAssessments.length} รายการ\n            </span>\n          </div>\n          <p className=\"text-xs text-slate-500 hidden md:block\">คลิกที่รายการเพื่อดูรายละเอียด</p>\n        </div>\n\n        {/* Assessment Items */}\n        <div className=\"p-4\">\n          {Object.entries(groupedAssessments).map(([categoryId, assessments]) => {\n            const category = categories.find(c => c.id === categoryId);\n            if (!category || assessments.length === 0) return null;\n            \n            return (\n              <div key={categoryId} className=\"mb-6 last:mb-0\">\n                {selectedCategory === 'all' && (\n                  <div className=\"flex items-center gap-2 mb-3\">\n                    <CategoryIcon category={categoryId} size=\"sm\" />\n                    <h3 className=\"font-bold text-slate-800 dark:text-white text-sm\">{category.name}</h3>\n                    <span className=\"px-2 py-0.5 bg-slate-100 dark:bg-slate-700 rounded-full text-xs font-bold text-slate-500\">\n                      {assessments.length}\n                    </span>\n                  </div>\n                )}\n                \n                {viewMode === 'list' && (\n                  <div className=\"space-y-2\">\n                    {assessments.map((assessment) => (\n                      <button\n                        key={assessment.id}\n                        onClick={() => handleSelectAssessment(assessment)}\n                        className=\"w-full p-4 rounded-xl border transition-all text-left hover:shadow-md border-slate-200/50 dark:border-slate-700/50 hover:border-teal-300 bg-slate-50/50 dark:bg-slate-800/30 hover:bg-white dark:hover:bg-slate-700/50\"\n                      >\n                        <div className=\"flex items-center gap-4\">\n                          <CategoryIcon category={assessment.category} />\n                          <div className=\"flex-1 min-w-0\">\n                            <div className=\"flex items-center gap-2 flex-wrap\">\n                              <h4 className=\"font-semibold text-slate-800 dark:text-white\">{assessment.name}</h4>\n                              <StatusBadge status={assessment.status} />\n                              {assessment.riskLevel && <RiskBadge risk={assessment.riskLevel} />}\n                            </div>\n                            <p className=\"text-sm text-slate-500 mt-1\">{assessment.nameTh}</p>\n                            <div className=\"flex items-center gap-4 mt-2 text-xs text-slate-400\">\n                              {assessment.score && <span className=\"font-bold text-slate-600 dark:text-slate-300\">{assessment.score}</span>}\n                              {assessment.assessedBy && (\n                                <span className=\"flex items-center gap-1\">\n                                  <User className=\"w-3 h-3\" />{assessment.assessedBy}\n                                </span>\n                              )}\n                              {assessment.lastUpdated && (\n                                <span className=\"flex items-center gap-1\">\n                                  <Clock className=\"w-3 h-3\" />{assessment.lastUpdated}\n                                </span>\n                              )}\n                            </div>\n                          </div>\n                          <ChevronRight className=\"w-5 h-5 text-slate-400\" />\n                        </div>\n                      </button>\n                    ))}\n                  </div>\n                )}\n                \n                {viewMode === 'grid' && (\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3\">\n                    {assessments.map((assessment) => (\n                      <button\n                        key={assessment.id}\n                        onClick={() => handleSelectAssessment(assessment)}\n                        className=\"p-4 rounded-xl border transition-all text-left hover:shadow-md border-slate-200/50 dark:border-slate-700/50 hover:border-teal-300 bg-slate-50/50 dark:bg-slate-800/30 hover:bg-white dark:hover:bg-slate-700/50\"\n                      >\n                        <div className=\"flex items-center gap-2 mb-3\">\n                          <CategoryIcon category={assessment.category} size=\"sm\" />\n                          <StatusBadge status={assessment.status} />\n                        </div>\n                        <h4 className=\"font-semibold text-slate-800 dark:text-white text-sm line-clamp-1\">{assessment.name}</h4>\n                        <p className=\"text-xs text-slate-500 mt-1 line-clamp-1\">{assessment.nameTh}</p>\n                        <div className=\"flex items-center justify-between mt-3 pt-3 border-t border-slate-100 dark:border-slate-700\">\n                          {assessment.score ? (\n                            <span className=\"text-sm font-bold text-slate-700 dark:text-slate-300\">{assessment.score}</span>\n                          ) : (\n                            <span className=\"text-xs text-slate-400\">-</span>\n                          )}\n                          {assessment.riskLevel && <RiskBadge risk={assessment.riskLevel} />}\n                        </div>\n                      </button>\n                    ))}\n                  </div>\n                )}\n              </div>\n            );\n          })}\n          \n          {filteredAssessments.length === 0 && (\n            <div className=\"text-center py-12\">\n              <FileQuestion className=\"w-16 h-16 mx-auto text-slate-300 mb-4\" />\n              <p className=\"text-slate-500 text-lg\">ไม่พบแบบประเมิน</p>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}}]
}